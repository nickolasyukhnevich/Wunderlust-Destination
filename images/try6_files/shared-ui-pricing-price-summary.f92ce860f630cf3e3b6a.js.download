/*@license For license information please refer to shared-ui-pricing-price-summary.licenses.txt*/
(self.webpackChunkblossom_flex_ui=self.webpackChunkblossom_flex_ui||[]).push([[91487],{6506:function(e,n,t){t.d(n,{j:function(){return V}});var r=t(67294),i=t(69430),a=t(39348),l=t(98250),c=t(64418),o=t(81721),s=t(85518),u=t(9972),m=t(57510),d=t(7411),E=t(58244),p=t(53367),f=t(73030);function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){y(e,n,t[n])}))}return e}function v(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function D(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);l=!0);}catch(o){c=!0,i=o}finally{try{l||null==t.return||t.return()}finally{if(c)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function S(){var e=_(["\n  fragment EnrichedMessageFragment on LodgingEnrichedMessage {\n    __typename\n    value\n    state\n  }\n"]);return S=function(){return e},e}function h(){var e=_(["\n  fragment PriceMessageFragment on DisplayPrice {\n    __typename\n    role\n    price {\n      formatted\n      accessibilityLabel\n    }\n    disclaimer {\n      content\n      primaryUIButton {\n        accessibility\n        primary\n      }\n    }\n  }\n"]);return h=function(){return e},e}function k(){var e=_(["\n  fragment PriceSummaryFragment on PropertyPrice {\n    displayMessages {\n      lineItems {\n        ...PriceMessageFragment\n        ...EnrichedMessageFragment\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return k=function(){return e},e}var x={EVENT_NAME:"price_summary.presented",EVENT_TYPE:"Impression",EVENT_VERSION:"1.0.0"},O=(0,i.Ps)(S()),I={STRONG:"bold",EMPHASIS:"medium"},P=function(e){var n=e.data,t=n.value,i=n.state,a=e.textAlign,l=e.legalNightlyExperimentVariant,c=void 0===l?0:l;return r.createElement(o.EGDSText,{size:2===c||"EMPHASIS"===i?300:200,weight:i?I[i]:"regular",align:a},t)};P.fragment=v(b({},O),{__typename:"LodgingEnrichedMessage"}),P.displayName="EnrichedMessage";var w=function(e){var n,t=e.disclaimer,i=e.textAlign,c=e.children,o=e.type,s=e.enableInlineLink,g=void 0!==s&&s,y=e.onDisclaimerClick,b=null!=t?t:{},v=b.content,_=void 0===v?"":v,S=b.primaryUIButton,h=r.useMemo((function(){return Math.random().toString(36).substr(2,5)}),[]),k="".concat(o,"-price-disclaimer-").concat(h),x=D((0,f.useDialog)(k,"pwaNestedDialog"),3),O=x[0],I=x[1],P=x[2],w=(0,l.useClickTracker)(),L=r.useCallback((function(){I.openDialog()}),[I]),T=(0,r.useRef)(null);return r.createElement(r.Fragment,null,g?r.createElement(p.o5,{onClick:L,onClickCapture:function(){w(".Price.DisclaimerDialog","Price Disclaimer Dialog"),y&&y()},"data-stid":"disclaimer-dialog-link",inline:!0},r.createElement("button",{type:"button",ref:T},r.createElement(a.EGDSLayoutFlex,{direction:"left"===i?"row-reverse":"row"},r.createElement(a.EGDSLayoutFlexItem,null,c)))):r.createElement(d.EGDSMoreInfoTrigger,{onClick:L,onClickCapture:function(){w(".Price.DisclaimerDialog","Price Disclaimer Dialog"),y&&y()},"data-stid":"disclaimer-dialog-link"},r.createElement("button",{type:"button",ref:T},r.createElement(a.EGDSLayoutFlex,{direction:"left"===i?"row-reverse":"row"},r.createElement(a.EGDSLayoutFlexItem,null,r.createElement(m.EGDSIcon,{name:"info_outline",size:m.EGDSIconSize.SMALL})),r.createElement(a.EGDSLayoutFlexItem,null,c)))),r.createElement(E.EGDSSheetTransition,{isVisible:O},r.createElement(P,null,r.createElement(u.EGDSDialog,{returnFocusOnClose:!0,dialogShow:O,triggerRef:T},r.createElement(u.EGDSDialogContent,null,_,r.createElement(u.EGDSDialogFooter,{buttonOne:{onClick:I.closeDialog,text:null!==(n=null==S?void 0:S.primary)&&void 0!==n?n:"",type:"tertiary"}}))))))},L=(0,i.Ps)(h()),T=function(e){var n=e.price,t=n.formatted,i=n.accessibilityLabel;return r.createElement(s.EGDSSpacing,null,r.createElement("div",null,r.createElement(o.EGDSText,{className:"is-visually-hidden"},i||t),r.createElement("span",{"aria-hidden":"true"},r.createElement(o.EGDSText,null,t))))},G=function(e){var n=e.price,t=n.formatted,i=n.accessibilityLabel;return r.createElement(s.EGDSSpacing,{padding:{block:"half"}},r.createElement("div",null,r.createElement(o.EGDSText,{className:"is-visually-hidden"},i||t),r.createElement("span",{"aria-hidden":"true"},r.createElement(o.EGDSText,{size:500,weight:"medium",theme:"emphasis"},t))))},C=function(e){var n=e.price,t=n.formatted,i=n.accessibilityLabel,a=e.disclaimer,l=e.textAlign,u=e.enableInlineLink,m=void 0!==u&&u,d=e.onDisclaimerClick,E=(0,c.useExperiment)("EGDS_remove_info_icon_and_add_inline_link").exposure,p=(0,c.useExperiment)("GT_Carousel_on_Package_Checkout").exposure,f=m&&(0!==E.bucket||0!==p.bucket),g=r.createElement(s.EGDSSpacing,{padding:{inline:"half"}},r.createElement("div",null,r.createElement(o.EGDSText,{className:"is-visually-hidden"},i||t),r.createElement("span",{"aria-hidden":"true"},r.createElement(o.EGDSText,{size:300},r.createElement("del",null,t)))));return a?r.createElement(w,{disclaimer:a,textAlign:l,type:"STRIKEOUT",enableInlineLink:f,onDisclaimerClick:d},g):g},N=function(e){var n=e.price,t=n.formatted,i=n.accessibilityLabel,a=e.disclaimer,l=e.enableInlineLink,u=void 0!==l&&l,m=(0,c.useExperiment)("Remove_info_icon_from_secondary_price_on_VrBex_US_POSa"),d=m.exposure,E=m.logExperiment;u&&E(d);var p=u&&0!==d.bucket,f=0!==(0,c.useExperiment)("How_travellers_understand_price_summary_visual_and_content_hierarchy").exposure.bucket,g=r.createElement(s.EGDSSpacing,{padding:{inline:"half"}},r.createElement("div",null,r.createElement(o.EGDSText,{className:"is-visually-hidden"},i||t),r.createElement("span",{"aria-hidden":"true"},r.createElement(o.EGDSText,{weight:f?"medium":"regular",size:f?300:200},t))));return a?r.createElement(w,{disclaimer:a,textAlign:"left",type:"INFORMATIVE",enableInlineLink:p},g):g},A=function(e){var n=e.data,t=e.textAlign,i=e.enableInlineLink,a=void 0!==i&&i,l=e.onDisclaimerClick;switch(n.role){case"LEAD":return r.createElement(G,b({},n));case"STRIKEOUT":return r.createElement(C,v(b({},n),{textAlign:t,enableInlineLink:a,onDisclaimerClick:l}));case"INFORMATIVE":return r.createElement(N,v(b({},n),{enableInlineLink:a}));default:return r.createElement(T,b({},n))}};A.fragment=v(b({},L),{__typename:"DisplayPrice"}),A.displayName="PriceMessage",C.displayName="StrikeOutPrice",G.displayName="LeadPrice",T.displayName="FallbackPrice";var M=(0,i.Ps)(k(),A.fragment,P.fragment),j=[A,P],F=function(e){var n,t=e.flexAlignment,i=e.flexDirection,l=void 0===i?"row":i,o=e.index,s=e.displayMessage,u=e.enableInlineLink,m=void 0!==u&&u,d=e.onDisclaimerClick,E=(0,c.useExperiment)("legal_test_nightly_POSa_total_lead_price_").exposure;return r.createElement(a.EGDSLayoutFlex,{space:"one",justifyContent:"row-reverse"===l?"end":t,direction:l,alignItems:"center",wrap:"wrap",dataTestId:"price-summary-message-line"},null==s||null===(n=s.lineItems)||void 0===n?void 0:n.map((function(e,n){var i=(e||{}).__typename,a=j.find((function(e){return e.fragment.__typename===i}));return a?r.createElement(a,{key:"attr-".concat(o,"-").concat(n),data:e,textAlign:"end"===t?"right":"left",enableInlineLink:m,legalNightlyExperimentVariant:E.bucket,onDisclaimerClick:d}):null})))},V=function(e){var n,t=e.data,i=e.flexAlignment,c=void 0===i?"end":i,o=e.enableInlineLink,s=void 0!==o&&o,u=e.messageLineFlexDirection,m=e.onDisclaimerClick,d=t.displayMessages,E={event:{event_type:(n=x).EVENT_TYPE,event_name:n.EVENT_NAME,event_version:n.EVENT_VERSION}};return(null==d?void 0:d.length)?r.createElement(a.EGDSLayoutFlex,{direction:"column",dataTestId:"price-summary"},r.createElement(l.EgClickstreamImpressionTracker,{eventData:E},d.map((function(e,n){return r.createElement(F,{key:"attr-".concat(n),index:n,flexAlignment:c,flexDirection:u,displayMessage:e,enableInlineLink:s,onDisclaimerClick:m})})))):null};V.fragment=M,V.displayName="sharedui-PriceSummary",F.displayName="sharedui-MessageLine"}}]);
//# sourceMappingURL=shared-ui-pricing-price-summary.f92ce860f630cf3e3b6a.js.map