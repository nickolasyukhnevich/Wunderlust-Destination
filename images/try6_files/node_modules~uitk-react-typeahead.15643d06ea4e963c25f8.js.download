/*@license For license information please refer to node_modules~uitk-react-typeahead.licenses.txt*/
(self.webpackChunkblossom_flex_ui=self.webpackChunkblossom_flex_ui||[]).push([[53074],{78474:function(){},33663:function(e,t,n){n.r(t),n.d(t,{ESSAdapter:function(){return v},GOOGLEMAPS_CATEGORY:function(){return r},GoogleAdapter:function(){return u},MapboxAdapter:function(){return g},PlacesServiceStatus:function(){return i},ThirdPartyAdapter:function(){return a},ThirdPartyAdapterFactory:function(){return y},TypeaheadLocationType:function(){return l},TypeaheadLogger:function(){return We},TypeaheadMenu:function(){return ge},TypeaheadRenderType:function(){return pe},UitkTypeahead:function(){return Re},UitkTypeaheadAttribution:function(){return Y},UitkTypeaheadDialog:function(){return ce},UitkTypeaheadInput:function(){return oe},UitkTypeaheadMenu:function(){return fe},UitkTypeaheadResultItem:function(){return Q},UitkTypeaheadResults:function(){return ne},appendQueryObject:function(){return d},appendQueryParam:function(){return h},filterTypeaheadResults:function(){return R},getSizeOfTypeaheadResults:function(){return T},selectTypeaheadResultIndex:function(){return S}});var i,s=n(70655),o=n(2009),a=function(){function e(e){this.locale=e}return e.prototype.toEssResult=function(e,t,n){var i=e,s="",o="",a=(i||"").split(",");return a.length<2?s=a[0].trim():(s=a[0],o=a.slice(1).map((function(e){return e.trim()})).join(", ").trim()),{category:this.category,coordinates:void 0,index:n,regionNames:{displayName:i,fullName:e,lastSearchName:e,primaryDisplayName:s,secondaryDisplayName:o},sourceId:t,sourceName:this.sourceName,type:this.type}},e}(),r="GOOGLEMAPS";!function(e){e.INVALID_REQUEST="INVALID_REQUEST",e.OK="OK",e.OVER_QUERY_LIMIT="OVER_QUERY_LIMIT",e.REQUEST_DENIED="REQUEST_DENIED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.ZERO_RESULTS="ZERO_RESULTS"}(i||(i={}));var l,c,u=function(e){function t(t,n,i){var s=e.call(this,t)||this;s.category=r,s.sourceName="GPA",s.type="ADDRESS";var a={accessToken:n,locale:t,version:i},l=new Promise((function(e,t){setTimeout((function(){t(new Error("Timeout: Map API initialization took too long"))}),1e4)}));return s.ready=Promise.race([(0,o.initGoogleMapsApi)(!1,a,!1),l]).then((function(){return s.google=window.google,s.initGooglePlacesService(),!0})).catch((function(e){return console.error(e),!1})),s}return(0,s.__extends)(t,e),t.getInstance=function(e,n,i){var s=e||"en_US",o=n||"AIzaSyABOFQNLMiTVN0AG3eWNmspVfVC8gNda68";return s in this.instances||(this.instances[s]=new t(s,o,i)),this.instances[s]},t.prototype.isReady=function(){return this.ready},t.prototype.initGooglePlacesService=function(){if(this.google&&this.google.maps&&this.google.maps.places){var e=this.google.maps.places,t=e.AutocompleteService,n=e.PlacesService;this.googleAutoCompleteService=new t,this.placesService=new n(document.createElement("div"))}},t.prototype.fetchResults=function(e){var t=this,n={input:e.q,type:"ADDRESS_AUTOCOMPLETE"===e.rc?["geocode"]:void 0};return new Promise((function(s){t.googleAutoCompleteService?t.googleAutoCompleteService.getPlacePredictions(n,(function(n,o){if(o===i.OK){var a=(r=t.handleResponse(n),{q:e.q,rc:e.rc,rid:e.rid,sr:r});s(a)}else s(e);var r})):s(e)}))},t.prototype.fetchLocation=function(e){var t=this;return this.isReady().then((function(n){return new Promise((function(s,a){if(!1==!n)try{var r={placeId:e,fields:["geometry"]};t.placesService.getDetails(r,(function(t,n){var o;if(n===i.OK){var r=null===(o=null==t?void 0:t.geometry)||void 0===o?void 0:o.location;s(r?{lat:r.lat().toFixed(5),lng:r.lng().toFixed(5)}:void 0)}else n===i.ZERO_RESULTS?s(void 0):a(new Error("Failed to fetch location for placeId ".concat(e,": ").concat(n)))}))}catch(l){a(new Error("Failed to fetch location for placeId ".concat(e,": ").concat((0,o.getErrorMessage)(l))))}else a(new Error("Unable to fetch location for placeId ".concat(e,": PlacesService is not initialized")))}))}))},t.prototype.handleResponse=function(e){var t=this,n=[];return e.forEach((function(e,i){n.push(t.toEssResult(e.description,e.place_id,i))})),n},t.instances={},t}(a),h=function(e,t,n){if(""===n||null===n)return e;var i=/\?/.test(e)?"&":"?",s=encodeURIComponent(t);return void 0!==n&&""!==n&&(s=s.concat("=",encodeURIComponent(n))),e+i+s},d=function(e,t){if(null==t)return e;var n=e;return Object.keys(t).forEach((function(e){var i=t[e];void 0!==i&&(n=h(n,e,i))})),n},p="pk.eyJ1IjoiZXhwZWRpYS1nZW8iLCJhIjoiY2w1anp3aXpuMDU3YTNibHY0Y21jazNteSJ9.fdrMME0LN_m9OEW_5v3sqA",g=function(e){function t(t,n){var i,s=e.call(this,t)||this;return i=t.split("_"),s.language=i[0],s.locale=i[1],s.category="MAPBOX",s.sourceName="mapbox",s.type="address",s.apiKey=n||p,s}return(0,s.__extends)(t,e),t.getInstance=function(e,n){var i=e||"en_US",s=n||p;return i in this.instances||(this.instances[i]=new t(i,s)),this.instances[i]},t.prototype.getGeocodingUrl=function(e,t){var n="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e,".json?");return d(n,t)},t.prototype.fetchFromMapbox=function(e){var t=this.getGeocodingUrl(e,{autocomplete:!0,language:this.language,types:this.type,fuzzyMatch:!0,access_token:this.apiKey});return fetch(t).then((function(e){return e.json()}))},t.prototype.fetchResults=function(e){var t=this;return new Promise((function(n){t.fetchFromMapbox(e.q).then((function(e){return void 0===(null==e?void 0:e.features)?[]:e.features})).then((function(i){return 0===i.length?n(e):n((s=t.handleResponse(i),{q:e.q,rc:e.rc,rid:e.rid,sr:s}));var s})).catch((function(){n(e)}))}))},t.prototype.handleResponse=function(e){var t=this,n=[];return e.forEach((function(e,i){var s=e.id.split(".")[1];n.push(t.toEssResult(e.place_name,s,i))})),n},t.instances={},t}(a),f={google:u,mapbox:g},y=function(){function e(){}return e.getInstance=function(e,t,n,i){return f[e].getInstance(t,n,i)},e.filterThirdPartyAdapterFromEssConfig=function(e){return e.filter((function(e){return e in f}))},e}();!function(e){e.HOTEL="HOTEL",e.AIRPORT="AIRPORT",e.MULTICITY="MULTICITY",e.POI="POI",e.METROCODE="METROCODE",e.METROSTATION="METROSTATION",e.TRAINSTATION="TRAINSTATION",e.ADDRESS="ADDRESS",e.NEIGHBORHOOD="NEIGHBORHOOD",e.CURRENT_LOCATION="CURRENT_LOCATION"}(l||(l={})),function(e){e.GOOGLE="google",e.CONSISTENT_DISPLAY="consistent_display"}(c||(c={}));var m,v=function(){function e(e){this.viewSize=0,this.isGeoLocationAllowed=!0,this.config=e,this.config.getDevice=this.getDevice,e.typeaheadLogger&&this.initLoggers(e.typeaheadLogger)}return e.prototype.setTypeaheadCategories=function(){var e=this.l10n.formatText;this.ESSCategories={ADDRESS:e("typeahead.ess.address"),AIRPORT:e("typeahead.ess.airport"),ATTRACTION:e("typeahead.ess.attraction"),CITY:e("typeahead.ess.city"),HOTEL:e("typeahead.ess.hotel"),METROCODE:e("typeahead.ess.city"),METROSTATION:e("typeahead.ess.metroStation"),MULTICITY:e("typeahead.ess.city"),MULTIREGION:e("typeahead.ess.city"),NEIGHBORHOOD:e("typeahead.ess.city"),POI:e("typeahead.ess.attraction"),TRAINSTATION:e("typeahead.ess.trainStation")}},e.prototype.isHistoryDetailEnabled=function(){return!0===this.config.historyDetail},e.prototype.getTypeaheadCategories=function(){return this.ESSCategories},e.prototype.addToESSCategories=function(e){this.ESSCategories=(0,s.__assign)((0,s.__assign)({},this.ESSCategories),e)},e.prototype.setL10n=function(e){this.l10n=e},e.prototype.initLoggers=function(e){var t=(0,s.__assign)({},this.config);delete t.typeaheadLogger,e.initLogger(t)},e.prototype.constructURL=function(e,t){var n=this,i=this.config.domain?this.config.domain:"";(i=i.endsWith("/")?i:"".concat(i,"/")).endsWith("/")&&(i=i.slice(0,-1));var o="AIRLINE"===n.config.domainId?"".concat(i,"/api/v2/suggest"):"".concat(i,"/api/v4/typeahead"),a=function(e){return Object.entries(e).map((function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(encodeURIComponent(n))})).join("&")};if(void 0!==this.config.browser&&null!==this.config.browser||(this.config.browser=this.getBrowser(window.navigator.userAgent)),void 0!==this.config.device&&null!==this.config.device||(this.config.device=this.getDevice(window.navigator.userAgent)),"AIRLINE"===this.config.domainId){var r={domainId:this.config.domainId,lob:this.config.lob,maxResults:this.config.maxResults,siteid:this.config.siteId,locale:this.config.locale};return"".concat(o,"?query=").concat(e,"&").concat(a(r))}var l=(0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)({browser:this.config.browser,client:this.config.client,dest:this.config.dest,device:this.config.device,expuserid:this.config.expuserid?this.config.expuserid:-1,features:this.config.features,format:"json",guid:this.config.guid,listing:!!this.config.listing,lob:this.config.lob,locale:this.config.locale,maxresults:this.config.maxResults,personalize:!!this.config.personalize&&this.config.personalize},this.config.regionId?{rid:this.config.regionId}:{}),{regiontype:this.config.regionType,siteid:this.config.siteId}),this.config.packageType?{pt:this.config.packageType}:{}),this.config.latLong?{latlong:this.config.latLong}:{}),this.config.lastSearchRegionId?{lsrid:this.config.lastSearchRegionId}:{}),this.config.lastSearchTimestamp?{lstime:this.config.lastSearchTimestamp}:{}),this.config.lastSearchLatLong?{lslatlong:this.config.lastSearchLatLong}:{}),this.config.lastSearchElapseTime?{lsetime:this.config.lastSearchElapseTime}:{}),this.config.googleApiKey?{googleApiKey:this.config.googleApiKey}:{}),this.config.googleApiVersion?{googleApiVersion:this.config.googleApiVersion}:{}),this.config.alternate&&t?{alternate:!0}:{}),this.config.debounceVariant?{ab:this.config.debounceVariant}:{}),this.config.trending?{trending:this.config.trending}:{}),this.config.alternateSecondVariant?{alternateSecondVariant:this.config.alternateSecondVariant}:{}),this.config.drivable?{drivable:this.config.drivable}:{}),this.config.fetchLocation?{fetchLocation:this.config.fetchLocation}:{});return""===e?"".concat(o,"/?").concat(a(l)):"".concat(o,"/").concat(e,"?").concat(a(l))},e.prototype.fetchResponse=function(e,t){var n=this,i=this.config&&this.config.personalize;return""===e&&i||""!==e?(this.config.typeaheadLogger&&this.config.typeaheadLogger.logTypeaheadRequest(e),fetch(this.constructURL(e,t),{method:"AIRLINE"===this.config.domainId?"POST":"GET"}).then((function(e){return n.config.typeaheadLogger&&n.config.typeaheadLogger.logResponse(e),e.json()}))):Promise.resolve([])},e.prototype.fetchResults=function(e,t){var n=this;this.config.typeaheadLogger&&this.config.typeaheadLogger.initLogger(this.config);var i=t?"":e;return this.fetchResponse(i,t).then((function(e){return n.handleEssResponse(e)})).then((function(e){return n.logResponse(e)})).then((function(e){return n.adaptResponseToTypeaheadResults(e,i,n.config.historyDetail)})).then((function(e){return n.categorizeOnFocusResponse(e,t)}))},e.prototype.fetchRecentSearchResults=function(){return this.fetchResults("")},e.prototype.fetchAlternativeResults=function(e){return this.fetchResults(e,this.config.alternate)},e.prototype.fetchResultsCategorized=function(e){var t=this;return this.config.typeaheadLogger&&this.config.typeaheadLogger.initLogger(this.config),this.fetchResponse(e).then((function(e){return t.handleEssResponse(e)})).then((function(e){return t.logResponse(e)})).then((function(n){return t.adaptResponseToTypeaheadResults(n,e,t.config.historyDetail)})).then((function(e){return t.categorizeResponse(e)}))},e.prototype.fetchRecentSearchResultsCategorized=function(){return this.fetchResultsCategorized("")},e.prototype.categorizeResponse=function(e){var t=this,n=new Map,i=[],s=0;if(e&&e.length>0){e.forEach((function(e){var i,s=(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.type)?t.ESSCategories[e.data.type]:"";n[s]||(n[s]=[]),n[s].push(e)}));for(var o=0,a=Object.entries(n);o<a.length;o++){var r=a[o],l=r[0],c=r[1];c.forEach((function(e){e.data.index=s,s++}));var u={heading:l,typeaheadResults:c};i.push(u)}}return i},e.prototype.onFocusCategories=function(){var e=this.l10n.formatText;return(0,s.__assign)({CURRENTLOCATION:"",POPULAR:e("typeahead.ess.popular")||"Explore popular destinations",DRIVABLE:e("typeahead.ess.nearby")||"Nearby locations"},this.config.alternateSecondVariant?{USERHISTORY:e("typeahead.ess.history")||"Recent searches",ALTERNATE:e("typeahead.ess.alternate")||"People also searched"}:{ALTERNATE:e("typeahead.ess.alternate")||"People also searched",USERHISTORY:e("typeahead.ess.history")||"Recent searches"})},e.prototype.categorizeOnFocusResponse=function(e,t){if(e&&e.length>0){var n=e[0];if("ALTERNATE"===n.data.category||"CURRENTLOCATION"===n.data.category||"POPULAR"===n.data.category||"DRIVABLE"===n.data.category&&this.config.drivable||"USERHISTORY"===n.data.category&&this.config.alternate&&t){var i=new Map,s=[],o=this.onFocusCategories(),a=0;e.forEach((function(e){if(e.data.category){var t=e.data.category;i[t]||(i[t]=[]),i[t].push(e)}}));for(var r=0,l=Object.entries(o);r<l.length;r++){var c=l[r],u=c[0],h=c[1],d=i[u];if(d&&d.length>0){d.forEach((function(e){e.data.index=a,e.data.displayType="CATEGORIZED",a+=1}));var p={heading:h,typeaheadResults:d};s.push(p)}}return(t||this.config.showCurrentLocation)&&(this.response.sr=s.flatMap((function(e){return e.typeaheadResults.map((function(e){return e.data}))})),this.config.typeaheadLogger&&this.config.typeaheadLogger.logTypeaheadResponse(this.response)),s}}return e},e.prototype.logSuggestionShown=function(e){this.config.typeaheadLogger&&this.config.typeaheadLogger.logSuggestionShown(e)},e.prototype.onItemSelection=function(e){var t;return null===(t=this.config.typeaheadLogger)||void 0===t||t.logSuggestionSelected(e),(null==e?void 0:e.type)===l.CURRENT_LOCATION?this.handleCurrentLocationSelection(e):this.config.fetchLocation&&(null==e?void 0:e.type)===l.ADDRESS&&e.category===r&&e.sourceId&&"function"==typeof this.thirdPartyFallbackAdapter.fetchLocation?this.fillLocation(this.thirdPartyFallbackAdapter.fetchLocation.bind(this.thirdPartyFallbackAdapter),e.sourceId,e):Promise.resolve(e)},e.prototype.handleCurrentLocationSelection=function(e){var t=this;if(this.isGeoLocationAllowed)return this.readCurrentLocation().then((function(t){var n=t.coords,i=n.latitude,o=n.longitude;return(0,s.__assign)((0,s.__assign)({},e),{location:{lat:i.toFixed(5),long:o.toFixed(5)}})})).catch((function(e){throw t.isGeoLocationAllowed=!1,e}));var n=this.l10n.formatText("typeahead.currentLocation.blocked.message");return window.alert(n),Promise.reject(n)},e.prototype.fillLocation=function(e,t,n){return e(t).then((function(e){if(e){var t=e.lat,i=e.lng;return(0,s.__assign)({location:{lat:t,long:i}},n)}return n}))},e.prototype.readCurrentLocation=function(){return new Promise((function(e,t){window.navigator.geolocation.getCurrentPosition(e,t)}))},e.prototype.typeaheadDialogOpened=function(e){if(this.config.typeaheadLogger){var t=e&&""!==e?e:void 0;this.config.typeaheadLogger.logTypeaheadOpen(t)}},e.prototype.logTypeaheadDismiss=function(){this.config.typeaheadLogger&&this.config.typeaheadLogger.logTypeaheadBlurEvent()},e.prototype.handleEssResponse=function(e){return e.sr=e.sr||e.suggestions||[],this.thirdPartyFallbackAdapter||this.setThirdPartyAdapter(),!this.thirdPartyFallbackAdapter||"GOOGLE_AUTOCOMPLETE"!==e.rc&&"ADDRESS_AUTOCOMPLETE"!==e.rc?Promise.resolve(e):this.thirdPartyFallbackAdapter.fetchResults(e)},e.prototype.setThirdPartyAdapter=function(){var e,t=y.filterThirdPartyAdapterFromEssConfig(this.config.features.split("|"));t.length>0&&(e=y.getInstance(t[0],this.config.locale,this.config.googleApiKey,this.config.googleApiVersion),this.thirdPartyFallbackAdapter=e)},e.prototype.logResponse=function(e){return this.config.typeaheadLogger&&this.config.typeaheadLogger.logTypeaheadResponse(e),this.response=e,Promise.resolve(e)},e.prototype.adaptResponseToTypeaheadResults=function(e,t,n){var i,o,a=this,r=function(e,t,n,i){return i?e("typeahead.recentHistory.travelers",n):e("typeahead.recentHistory.roomsTravelers",t,n)},l=function(e){return"LISTING"===(null==e?void 0:e.type)&&e.listingProps?e.listingProps.headline:void 0},u=function(e){return"LISTING"===(null==e?void 0:e.type)&&e.listingProps?"".concat(e.listingProps.listingId," - ").concat(e.listingProps.baseLocation):void 0},h=function(e){var i,s,o,h,d,p=function(e,i){var s;if("USERHISTORY"===e&&n&&void 0!==a.l10n&&i&&i.searchDetail&&i.searchDetail.lob&&!t){var o="",l=i.searchDetail,c=a.l10n,u=c.formatDateString,h=c.formatText,d=l.roomCount,p=l.lob,g=i.searchDetail.totalTravelerCount?Number(i.searchDetail.totalTravelerCount):null;if(i.searchDetail.startDate&&i.searchDetail.endDate){var f=new Date(l.startDate),y=6e4*f.getTimezoneOffset(),m=u(new Date(f.getTime()+y),{skeleton:"MMMd"}),v=new Date(l.endDate),T=6e4*v.getTimezoneOffset(),R=u(new Date(v.getTime()+T),{skeleton:"MMMd"}),S=h("datePicker.nightSummary",(Number(l.endDate)-Number(l.startDate))/864e5);s="".concat(m," - ").concat(R),1!==d||"Lodging"!==p&&"Package"!==p?"Lodging"!==p&&"Package"!==p||(s="".concat(m," - ").concat(R," | ").concat(S)):(o=r(h,d,g,a.config.excludeRoomsLabelForRecentHistory),s="".concat(m," - ").concat(R," | ").concat(S," | ").concat(o))}else i.searchDetail.startDate||i.searchDetail.endDate||1!==d||"Lodging"!==p&&"Package"!==p||(s=r(h,d,g,a.config.excludeRoomsLabelForRecentHistory))}return s}(e.category,e)||u(e);if(a.config.features.indexOf(c.CONSISTENT_DISPLAY)<0)return{primaryText:(null===(i=e.regionNames)||void 0===i?void 0:i.displayName)||(null===(s=e.names)||void 0===s?void 0:s.displayName)||l(e),subtext:p};var g=(null===(o=e.regionNames)||void 0===o?void 0:o.primaryDisplayName)||(null===(h=e.names)||void 0===h?void 0:h.displayName)||l(e);if(p)return{primaryText:"<strong>".concat(g,"</strong>"),subtext:p};var f=(null===(d=e.regionNames)||void 0===d?void 0:d.secondaryDisplayName)||u(e)||"";return{primaryText:"<strong>".concat(g,"</strong>"),subtext:f}},d=function(e,t,n,i,s){if("AIRLINE"===e)return"";if(n&&!i)return"subdirectory_arrow_right";if("USERHISTORY"===s)return"history";if("FLIGHTS"===a.config.lob)return"lob_flights";switch(e){case"HOTEL":return"lob_hotels";case"AIRPORT":return"lob_flights";case"ADDRESS":return"RENTALLOCATION"===t?"lob_cars":"place";case"METROSTATION":case"TRAINSTATION":return"train";default:return"place"}},p=function(e,n,i){var o,r,l,c,u,p,g,f,y,m,v,T=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("nearby")>-1,R=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("child")>-1||T,S=h(n),E=S.primaryText,I=S.subtext,C=(0,s.__assign)((0,s.__assign)({data:(0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)((0,s.__assign)({},n.category?{category:n.category}:{}),!t&&n.searchDetail?{searchDetail:n.searchDetail}:{}),n.userHistoryType?{userHistoryType:n.userHistoryType}:{}),(null===(o=n.ids)||void 0===o?void 0:o.id)?{id:n.ids.id}:{}),n.coordinates?{location:{lat:n.coordinates.lat,long:n.coordinates.long}}:{}),n.regionId?{regionId:n.regionId}:n.gaiaId?{regionId:n.gaiaId}:{}),n.cityId?{cityId:n.cityId}:{}),n.regionNames?{regionNames:n.regionNames}:{}),n.type?{type:n.type}:{}),n.subtype?{subtype:n.subtype}:{}),n.hotelId?{selected:n.hotelId}:{}),n.hierarchyInfo?{hierarchyInfo:n.hierarchyInfo}:{}),"LISTING"===n.type&&n.listingProps?{listing:n.listingProps}:{}),n.sourceId?{sourceId:n.sourceId}:{}),n.essId?{essId:{sourceId:n.essId.sourceId,sourceName:n.essId.sourceName}}:{}),{dest:a.config.dest}),{index:i+1}),icon:d(n.type||n.domainId,n.subtype,R,T,n.category)},R?{isChild:!0}:{}),{name:E,subtext:I,title:(null===(r=n.regionNames)||void 0===r?void 0:r.lastSearchName)||(null===(l=n.regionNames)||void 0===l?void 0:l.shortName)||(null===(c=n.regionNames)||void 0===c?void 0:c.fullName)||(null===(u=n.listingProps)||void 0===u?void 0:u.listingId)||(null===(p=n.ids)||void 0===p?void 0:p.id),value:(null===(g=n.regionNames)||void 0===g?void 0:g.lastSearchName)||(null===(f=n.regionNames)||void 0===f?void 0:f.shortName)||(null===(y=n.regionNames)||void 0===y?void 0:y.fullName)||(null===(m=n.listingProps)||void 0===m?void 0:m.listingId)||(null===(v=n.names)||void 0===v?void 0:v.displayName)});return e.push(C),e},g=""===t&&this.shouldShowCurrentLocation()?[this.getCurrentLocationItem()]:[];return(null===(o=null===(i=e.sr)||void 0===i?void 0:i.reduce)||void 0===o?void 0:o.call(i,p,g))||g},e.prototype.shouldShowCurrentLocation=function(){return Boolean(this.config.showCurrentLocation&&"geolocation"in navigator)},e.prototype.getCurrentLocationItem=function(){var e=this.isGeoLocationAllowed?this.l10n.formatText("typeahead.currentLocation.available.item"):this.l10n.formatText("typeahead.currentLocation.blocked.item");return{data:{category:"CURRENTLOCATION",hierarchyInfo:{relation:["current"]},index:-1,enabled:this.isGeoLocationAllowed,regionNames:{fullName:"CurrentLocation"},type:l.CURRENT_LOCATION},icon:"my_location",name:e,title:e,value:e}},e.prototype.getBrowser=function(e){var t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE":"Chrome"===n[1]&&null!==(t=e.match(/\b(OPR|Edge?)\/(\d+)/))?t.slice(1,-1).join(" ").replace("OPR","Opera").replace("Edg ","Edge "):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n[0])},e.prototype.getDevice=function(e){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(e)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(e)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"Mobile":"Desktop"},e}(),T=function(e){switch(e.type){case"categorized":return e.items.reduce((function(e,t){return e+t.typeaheadResults.length}),0);case"uncategorized":return e.items.length}},R=function(e,t){switch(e.type){case"categorized":return(0,s.__assign)((0,s.__assign)({},e),{items:e.items.map((function(e){return(0,s.__assign)((0,s.__assign)({},e),{typeaheadResults:e.typeaheadResults.filter((function(e){return!t.includes(e.value)}))})}))});case"uncategorized":return(0,s.__assign)((0,s.__assign)({},e),{items:e.items.filter((function(e){return!t.includes(e.value)}))})}},S=function(e,t){switch(e.type){case"categorized":return e.items.reduce((function(e,t){return e.push.apply(e,t.typeaheadResults),e}),[])[t];case"uncategorized":return e.items[t]}},E=n(29892),I=n(19633),C=n(67294),N=n(68369),A=n(54552),L=n(3774),b=n(80463),O=n(23984),D=n(91233),_=n(24499),w=n(97534),P=n(41913),M=n(34353),k=n(49349),x=n(79221),U=n(46605),G=n(44896),z=n(89362),F=n(30300),K=n(93351),H=n(78987),B=n(78474),W=n.n(B),q=o.classNames.bind(W()),Y=function(e){var t,n=e.results,i=function(e){var t;return e?null===(t=e.data)||void 0===t?void 0:t.category:""},s=function(e){return e.find((function(e){return e.data&&e.data.category}))},o=function(e){return e.some((function(e){var n="category";return e.data&&e.data[n]&&e.data[n]===t}))};if(!function(e){switch(e.type){case"categorized":return t=function(e){var t=e.find((function(e){return s(e.typeaheadResults)}));return void 0!==t&&t.typeaheadResults?i(t.typeaheadResults[0]):""}(e.items),function(e){return e.some((function(e){return o(e.typeaheadResults)}))}(e.items);case"uncategorized":return t=function(e){return i(s(e))}(e.items),function(e){return o(e)}(e.items)}}(n))return null;switch(t){case r:return C.createElement("div",{className:q("uitk-typeahead-google-logo")},C.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAASCAYAAAC0PldrAAAIHElEQVR4Ae3ZBXDbWB7H8efglpmZGW0HlhzJDpSZmZkZ3W3s2DpmZmbmKx0zM/NdoGhotxTf9x9LHY027paW85v5bBRQopn32weqasqzk5Jw7BE9nHijHo5/Rw/HfqaHYl/keldZ8GJ7qBeqZ/6PNGlPUT5DeVKNqkyc18PJ6VDPtfEfnvUJz0dmpbwfmzMW6k5YFy96pBRTkCnL4MUDiy94oS0F+ZVZlD/5qxLLfNFkz0D0fBtfKOkpCcffrFfG6vVQ4hDUc6ypQLdDFmMdMiWIcjywaOHEB8zynPEFa1pCOWnHLw2Bej5oKtDzqEC+cGyoWZ5YaTDeGer57r4LRPLRCi40liy0QR4eVB5CG2QhU3KQneG+TM/qQhvk424L1Bwt73P22d9QoFD8bVB3KxVUWTX+gqW1mvvLtbr7Z7V+z6frNM/UlFIuKAD83I2v5y69eiL3y9dPZP/s2tdyPn39ZN7UVEq5oCz8x+WvjC/SQrEv8/u/z/O9siSUKNfC8agWSbrRaIH+p3lH1Pg976jxe38gz8JzzLM/g2QhpmIuIjCwB/0cg6HjGAxEsQQtIZmCtbBnLbY4BngZptkGaQmiMHAUhbCyEJMxCxGsh6QFltruOwIv7BmEfTAQwWwsvYMCTcMqGKat6AJJCXYjD1ZcWIdZsEdK8K50gZLroez4+l4G8j1PURlfAJWaMye7Vvd+otbvTVVr7hvVmvc/ci0YyNdAidTHVPa1EzmfuH4iN0WBbnD9H7lu8PXc10CJYDCVxanvffI8nAZvloQTNenZMXYt/YyJ5Y3tgar9nkCt5n2y4Tl073+5TprPEIYSknW2ARpkWosQOkFSiijK0BtuHME2ZGMMDLSDpBMMU29bYaIYBxfW4wBGojcmw8BIWM8Vwjq40QMubMR+231TYGAYJN1QhVUYgEHYgMgdFCiCBeiLYdiJI2iO9og6St4XBgZnKpAWjm2AsmNZO+E8jdlnqzrdvS49aO4fndWLekDVlbmHMoB/MQewAorCrDML86P6E816QD35lbyhzER/SZcouwJKq0oskd9PSX9aVnm5F1RJVbKQr13IVKCU251b7Xf/WwpcqxfMkVnngm9MW+sZ6gJeD24N1BHkwUouDmI28hDGBNjTDwZGIR9hFEOiYyu2YRIkY1GFhzAABvrCnpVYbyvQAeTAyiBHKa2sNUnmY5/jvnwcvYMCbXDMmG1QBR2SJdhu+5l52NXYMsqA7EsXI/5OKBvEhnMKK7LwtePpgYy9HIpB+lbDIGmFbihLTcAzs6FAuueDUJTkW0hdO5XrhrJc/1reTPk6BfsgZMY7iZS/KumFsmihxIFMBaoNeHxmiT/6H5+7Y41esJcl7K/pmdD9N64n4tZALYQzs7EDvTMMmgtBW7GWYyUk26DDj/1wYYHt+z7bUhixMXDMVqDFznG5zX1HIdmDGbDnTvdAGpzZhGWO/2n6ojnCKIIzDNClwQ1LRmU8ETCS3aEysU5r7FHmQckAyUD9sWJgPpSlNlA4SL7O0vJNqGtfz/6bFKX+SyofyvLk1/IGNcxAX8v9JpS8QpDfX/Ha+nwoC8vplIwFYq/TUFbN+w9Zxqr93vpq3fOFWn/BJFlioYQ1UEvgzHxsRQ8Y6NdIgY6jDBI3wugGA53QxVa+IAogeQwR9EB3h27IVGwfqjLc1xWSnZgNZ5bdQYECcGabrcgubMUCPIZjtztQWPsOZpjvPRq52A7KSatKTpV3QfxcXenL61tASUFk8M7q7gIoiywl6UF1fwBKCmLONAVQlhsn8+aYX/8AVEll4pQ8h7x7grLIRj9TgWo0z8Ppsnqv1eqeyP98hX2hZClrrEDH0QpWWuIYJiMbQcx1TNWjYWCQbY8TwQbshJXdWI+obdPdEwbGwJ7ipylQH2vZdN5nK9AMHEVzx1JUeQcF2uVY+rojimJYGY8q7MdEZIy8MGTwfmHuhf5JkTbJex/fyxJdtcpLDzNob5JNrbn/mQMl2ECvNpeKn1sDV6MVjGEz/U9zWSmFYuO82tzr/PzK6fy+UFdP5o6hNP9M742ySyFL1VJrDxSIXu4NJUunvAXPVCApCfufP5p7rg1y2pMZkeswX/u+zIawF0jtwyOmvThiK5UXBhbDgwkIY7mjVKthoBRWymE0MngLbXsrN+bbS5WhQC4sRggVjvtGQ9IWQexGMR7BfjxxBwV6AptRgBIcxU7kwkoODiOCtrhtZOZhkD52m3/KiFGs+VCAdYT3fsicAer5WIcU4DGghPzcta/nfKjhFPa13HrUybW5fBlQQk5hWmXi/fL3rNnuTk5hdX6Pl79/wTwNXrJOYbIXOh9w98atgVqAx7EPx7AUHWDPSGy2la0MOY38zCp0gZWuWNXIbJONAPYhhK0YDSsTocGZbJRmuM9KJ6zAceyHD489zYyxCGMwGYdts24LOLMWi3DHkQ0sg/QqWU5KwvEf4HPMDHseDcc6QTnJUiH7EGajz8g7GPYiH2EWKoOyk/c9vAeax6zzGcryAz5+5PrJ7DIoO37QxTufhRT0C+zLvst11FrC5JQG5f7IrJd5Pjzzx56Pzh4CJc76CnryHugVPMe3OcqfYTkLymkMCpk30RnTlG62jfQLIr5gKkf+wVY29lAWWULTM2HsMah70VSgu888bIULL4hw2pqRPhEmfiMbadmbyWzE/utqSSj2nznBVB7UvWgq0N2lLSIYhxdOWL5k+Xzq/it2mdcGAah7ZV00eQlgxvFRpNfJeyc+Bn2RK32h7sf/AesqcHB02e65AAAAAElFTkSuQmCC",alt:"Powered by Google Logo"}));case"MAPBOX":return C.createElement("div",{className:q("uitk-typeahead-google-logo")},"powered by"," ",C.createElement("svg",{viewBox:"0 0 81 20",width:"81px",height:"20px"},C.createElement("path",{d:"M9.07917722,0.0888888889 C4.06575949,0.0888888889 0,4.52222222 0,9.98888889 C0,15.4555556 4.06575949,19.8888889 9.07917722,19.8888889 C14.0925949,19.8888889 18.1583544,15.4555556 18.1583544,9.98888889 C18.1583544,4.52222222 14.0925949,0.0888888889 9.07917722,0.0888888889 Z M55.7284177,2.27777778 C55.6061392,2.27777778 55.5042405,2.38888889 55.5042405,2.52222222 L55.5042405,13.9888889 C55.5042405,14.1222222 55.6061392,14.2333333 55.7284177,14.2333333 L57.0938608,14.2333333 C57.2161392,14.2333333 57.318038,14.1222222 57.318038,13.9888889 L57.318038,13.2 C58.0211392,14 58.9891772,14.4555556 59.9979747,14.4555556 C62.1276582,14.4555556 63.8599367,12.4555556 63.8599367,9.97777778 C63.8599367,7.5 62.1276582,5.51111111 59.9979747,5.51111111 C58.9789873,5.51111111 58.0109494,5.96666667 57.318038,6.76666667 L57.318038,2.52222222 C57.318038,2.38888889 57.2161392,2.27777778 57.0938608,2.27777778 L55.7284177,2.27777778 Z M10.0166456,3.93333333 C11.1782911,3.96666667 12.3501266,4.46666667 13.2468354,5.45555556 C15.050443,7.42222222 15.1115823,10.5333333 13.3894937,12.4222222 C10.2815823,15.8111111 4.74848101,14.7222222 4.74848101,14.7222222 C4.74848101,14.7222222 3.74987342,8.68888889 6.85778481,5.3 C7.72392405,4.36666667 8.86518987,3.91111111 10.0166456,3.93333333 Z M26.3510127,5.51111111 C25.515443,5.51111111 24.7308228,5.95555556 24.231519,6.68888889 L24.231519,5.97777778 C24.231519,5.84444444 24.1296203,5.73333333 24.0073418,5.73333333 L22.6418987,5.73333333 C22.5196203,5.73333333 22.4177215,5.84444444 22.4177215,5.97777778 L22.4177215,14 C22.4177215,14.1333333 22.5196203,14.2444444 22.6418987,14.2444444 L24.0073418,14.2444444 C24.1296203,14.2444444 24.231519,14.1333333 24.231519,14 L24.231519,9.2 C24.2824684,8.12222222 24.9651899,7.27777778 25.8007595,7.27777778 C26.6668987,7.27777778 27.3903797,8.06666667 27.3903797,9.11111111 L27.3903797,14 C27.3903797,14.1333333 27.4922785,14.2444444 27.614557,14.2444444 L28.9901899,14.2444444 C29.1124684,14.2444444 29.2143671,14.1333333 29.2143671,14 L29.2041772,9.01111111 C29.3264557,8.03333333 29.9786076,7.27777778 30.7632278,7.27777778 C31.6293671,7.27777778 32.3528481,8.06666667 32.3528481,9.11111111 L32.3528481,14 C32.3528481,14.1333333 32.4547468,14.2444444 32.5770253,14.2444444 L33.9526582,14.2444444 C34.0749367,14.2444444 34.1768354,14.1333333 34.1768354,14 L34.1666456,8.48888889 C34.1972152,6.84444444 32.9132911,5.51111111 31.3236709,5.51111111 C30.3046835,5.52222222 29.3672152,6.16666667 28.9290506,7.17777778 C28.419557,6.14444444 27.4311392,5.5 26.3510127,5.51111111 L26.3510127,5.51111111 Z M39.3838608,5.51111111 C37.2541772,5.51111111 35.5218987,7.51111111 35.5218987,9.98888889 C35.5218987,12.4666667 37.2541772,14.4666667 39.3838608,14.4666667 C40.4028481,14.4666667 41.3708861,14.0111111 42.0637975,13.2111111 L42.0637975,14 C42.0637975,14.1333333 42.1656962,14.2444444 42.2879747,14.2444444 L43.6534177,14.2444444 C43.7756962,14.2444444 43.8775949,14.1333333 43.8775949,14 L43.8775949,5.97777778 C43.8877848,5.84444444 43.7858861,5.73333333 43.6534177,5.73333333 L42.2879747,5.73333333 C42.1656962,5.73333333 42.0637975,5.84444444 42.0637975,5.97777778 L42.0637975,6.76666667 C41.3606962,5.96666667 40.3926582,5.51111111 39.3838608,5.51111111 Z M50.1953165,5.51111111 C49.1763291,5.51111111 48.2082911,5.96666667 47.5153797,6.76666667 L47.5153797,5.97777778 C47.5153797,5.84444444 47.413481,5.73333333 47.2912025,5.73333333 L45.9257595,5.73333333 C45.803481,5.73333333 45.7015823,5.84444444 45.7015823,5.97777778 L45.7015823,17.4444444 C45.7015823,17.5777778 45.803481,17.6888889 45.9257595,17.6888889 L47.2912025,17.6888889 C47.413481,17.6888889 47.5153797,17.5777778 47.5153797,17.4444444 L47.5153797,13.2 C48.218481,14 49.186519,14.4555556 50.1953165,14.4555556 C52.325,14.4555556 54.0572785,12.4555556 54.0572785,9.97777778 C54.0572785,7.5 52.325,5.51111111 50.1953165,5.51111111 Z M69.0975316,5.51111111 C66.7844304,5.51111111 64.9196835,7.51111111 64.9196835,9.98888889 C64.9196835,12.4666667 66.7946203,14.4666667 69.0975316,14.4666667 C71.400443,14.4666667 73.2753797,12.4666667 73.2753797,9.98888889 C73.2753797,7.51111111 71.4106329,5.51111111 69.0975316,5.51111111 Z M73.7237342,5.73333333 C73.6116456,5.73333333 73.5199367,5.83333333 73.5199367,5.95555556 C73.5199367,6 73.5301266,6.04444444 73.5505063,6.07777778 L75.8941772,9.96666667 L73.5199367,13.9 C73.4587975,14 73.4791772,14.1444444 73.5810759,14.2111111 C73.6116456,14.2333333 73.6524051,14.2444444 73.6931646,14.2444444 L75.2725949,14.2444444 C75.3948734,14.2444444 75.506962,14.1777778 75.5681013,14.0666667 L76.9743038,11.5 L78.3805063,14.0666667 C78.4416456,14.1777778 78.5537342,14.2444444 78.6760127,14.2444444 L80.255443,14.2444444 C80.3675316,14.2444444 80.4592405,14.1444444 80.4592405,14.0222222 C80.4592405,13.9777778 80.4490506,13.9444444 80.4286709,13.9 L78.0544304,9.96666667 L80.3981013,6.07777778 C80.4592405,5.97777778 80.4388608,5.83333333 80.336962,5.76666667 C80.3063924,5.74444444 80.2656329,5.73333333 80.2248734,5.73333333 L78.645443,5.73333333 C78.5231646,5.73333333 78.4110759,5.8 78.3499367,5.91111111 L76.9743038,8.43333333 L75.5986709,5.91111111 C75.5375316,5.8 75.425443,5.73333333 75.3031646,5.73333333 L73.7237342,5.73333333 Z M10.1185443,5.88888889 L9.23202532,7.88888889 L7.40803797,8.85555556 L9.23202532,9.82222222 L10.1185443,11.8222222 L11.0152532,9.82222222 L12.8392405,8.85555556 L11.0152532,7.88888889 L10.1185443,5.88888889 Z M39.6997468,7.3 C40.9938608,7.3 42.0434177,8.48888889 42.0637975,9.95555556 L42.0637975,10.0222222 C42.0536076,11.4888889 40.9938608,12.6777778 39.6997468,12.6777778 C38.395443,12.6777778 37.3356962,11.4777778 37.3356962,9.98888889 C37.3356962,8.5 38.395443,7.3 39.6997468,7.3 L39.6997468,7.3 Z M49.8692405,7.3 C51.1735443,7.3 52.2332911,8.5 52.2332911,9.98888889 C52.2332911,11.4777778 51.1735443,12.6777778 49.8692405,12.6777778 C48.5751266,12.6777778 47.5255696,11.4888889 47.5051899,10.0222222 L47.5051899,9.95555556 C47.5255696,8.48888889 48.5751266,7.3 49.8692405,7.3 L49.8692405,7.3 Z M59.6820886,7.3 C60.9863924,7.3 62.0461392,8.5 62.0461392,9.98888889 C62.0461392,11.4777778 60.9863924,12.6777778 59.6820886,12.6777778 C58.3879747,12.6777778 57.3384177,11.4888889 57.318038,10.0222222 L57.318038,9.95555556 C57.3384177,8.48888889 58.3879747,7.3 59.6820886,7.3 L59.6820886,7.3 Z M69.0771519,7.3 C70.3814557,7.3 71.4412025,8.5 71.4412025,9.98888889 C71.4412025,11.4777778 70.3814557,12.6777778 69.0771519,12.6777778 C67.7728481,12.6777778 66.7131013,11.4777778 66.7131013,9.98888889 C66.7131013,8.5 67.7728481,7.3 69.0771519,7.3 Z"})));default:return null}},V=n(13413),j=o.classNames.bind(W()),Q=function(e){function t(t){var n=e.call(this,t)||this;return n.getSanitizedName=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent},n.handleClick=n.handleClick.bind(n),n}return(0,s.__extends)(t,e),t.prototype.handleClick=function(){var e=this.props,t=e.data;(0,e.onResultItemSelect)(e.value,t)},t.prototype.render=function(){var e,t,n,i,s=this.props,a=s.activeSuggestion,r=s.className,l=s.icon,c=s.index,u=s.name,h=s.stid,d=s.sanitized,p=s.subtext,g=s.contentRef,f=s.historyDetail,y=j(r,p?"uitk-typeahead-result-item has-subtext":"uitk-typeahead-result-item",!0===a&&"uitk-typeahead-result-item-hover");if(!0===a){var m=this.getSanitizedName(u);(0,o.liveAnnounce)("".concat(m),void 0,void 0,g)}var v="full-search-detail-".concat(f||!1);return d?n=C.createElement("span",null,u):(n=C.createElement("div",{className:j("truncate")},C.createElement("span",{dangerouslySetInnerHTML:{__html:u}})),p&&(i=C.createElement("div",{"data-stid":v,className:j("is-subText","truncate"),dangerouslySetInnerHTML:{__html:p}}))),l&&(t=C.createElement(U.fR,{name:l,size:U.eZ.SMALL})),e=p?"".concat(u," ").concat(p).replace(/(<([^>]+)>)/gi,""):null==u?void 0:u.replace(/(<([^>]+)>)/gi,""),C.createElement(G.v,{spacing:"relaxed",className:y,"data-stid":h&&"".concat(h,"-result-item"),"data-index":c},C.createElement(V.AE,{"data-stid":h&&"".concat(h,"-result-item-button"),onClick:this.handleClick,className:j(p&&"has-subtext","".concat(h,"-result-item-button"),"result-item-button"),"aria-label":e,type:"button",isFullWidth:!0}),C.createElement(O.v,null,C.createElement(D.t,{alignSelf:"center"},t),C.createElement(D.t,null,C.createElement("div",{className:j("uitk-typeahead-button-label","truncate")},n,i))))},t.displayName="UitkTypeaheadResultItem",t}(C.Component),Z=n(58850),J=n(8315),X=o.classNames.bind(W()),$=function(e){var t=e.headingText,n=e.hideHeading,i=void 0!==n&&n,s=e.typeaheadLabel,a=e.stid,r=void 0===a?"":a,l=e.values,c=void 0===l?[]:l,u=e.onItemRemove,h=void 0===u?function(){}:u,d=e.onClear,p=void 0===d?function(){}:d,g=e.clearAllText,f=e.className,y=(0,E.useLocalization)(),m=null!=g?g:y.formatText("typeahead.mulselect.clearAll"),v=null!=t?t:y.formatText("typeahead.multiselect.selectedItemHeading");return C.createElement("div",{className:X("uitk-typeahead-selections",f)},!i&&v&&c.length>0?C.createElement("div",{className:X("uitk-typeahead-result-title-label","truncate")},v):null,C.createElement("div",{className:X("uitk-typeahead-pills"),"data-stid":r},c.map((function(e,t){return C.createElement(Z.p,{onClick:function(){return function(e,t){(0,o.liveAnnounce)(y.formatText("typeahead.removeSelection",e)),h(t)}(e,t)},id:"".concat(r,"-pill-").concat(t),key:"".concat(r,"-pill-").concat(t),className:X("uitk-typeahead-pill-removable")},e)})),c.length?C.createElement(J.m,{onClick:function(){(0,o.liveAnnounce)(y.formatText("typeahead.clearAllSelections",s)),p()},size:V.xY.SMALL},m):null))},ee=o.classNames.bind(W()),te=function(e){var t=e&&e.data&&e.data.type===l.CURRENT_LOCATION;return ee({"is-child":e.data&&e.isChild,"uitk-typeahead-current-location":t&&e.data.enabled,disabled:t&&!e.data.enabled})},ne=function(e){var t=e.activeSuggestion,n=e.allowExactMatch,i=e.listTitle,s=e.typeaheadLabel,o=e.onResultItemSelect,a=e.results,r=e.searchTerm,l=e.stid,c=e.emptyResultPlaceholder,u=e.isMulti,h=e.onClearAll,d=e.onItemRemove,p=e.clearAllText,g=e.selectedItemHeading,f=e.value,y=e.domRef,m=e.contentRef,v=e.historyDetail,S=(0,E.useLocalization)(),I=u?R(a,f):a,N=T(I),A=u?"uitk-typeahead-multi-selection-results":"uitk-typeahead-results",L=function(){return u&&f.length>0?C.createElement($,{typeaheadLabel:s,values:f,stid:l,clearAllText:p,onClear:h,onItemRemove:d,headingText:g,className:ee("uitk-typeahead-results-selections")}):null};if(!a||0===a.items.length)return c?C.createElement(K.l,{padding:{blockstart:"three"}},C.createElement("div",null,L(),C.createElement(O.v,{justifyContent:"center",alignContent:"center",className:ee("uitk-typeahead-empty-state")},C.createElement(F.b,{align:"center"},C.createElement(K.l,{margin:{blockstart:"six"}},C.createElement(U.fR,{name:"search",size:U.eZ.XLARGE})),C.createElement(K.l,{margin:{blockend:"three"}},C.createElement(F.b,{size:300},c)))))):C.createElement(K.l,{padding:{blockstart:"three"}},C.createElement("div",null,L()));var b=function(e,t){return o(e,t,I)},D=function(e){var t;return null===(t=e[0])||void 0===t?void 0:t.disabled},_=function(e){var t,n;return null===(n=null===(t=e[0])||void 0===t?void 0:t.typeaheadResults[0])||void 0===n?void 0:n.disabled},w=function(){return C.createElement("div",{className:ee("uitk-typeahead-results-skeleton-container")},C.createElement(H.H,{className:ee("uitk-typeahead-results-skeleton","uitk-typeahead-results-skeleton-first")}),C.createElement(H.H,{className:ee("uitk-typeahead-results-skeleton","uitk-typeahead-results-skeleton-second")}),C.createElement(H.H,{className:ee("uitk-typeahead-results-skeleton")}))};return C.createElement(K.l,{padding:{blockstart:"three"}},C.createElement("div",{className:ee(A),ref:y},L(),C.createElement(z.D,{className:ee("no-bullet"),"data-stid":l&&"".concat(l,"-results")},function(e){switch(e.type){case"categorized":return _(e.items)?w():(s=e.items)&&s.map((function(e){return C.createElement(C.Fragment,{key:e.heading},e.heading&&C.createElement(G.v,{spacing:"relaxed",className:ee("uitk-typeahead-result-title")},C.createElement("div",{className:ee("uitk-typeahead-result-title-label","truncate")},e.heading)),e.typeaheadResults&&e.typeaheadResults.map((function(e,n){var i;return C.createElement(Q,{className:te(e),data:e.data,key:n,index:n,icon:e.icon,name:e.name,onResultItemSelect:b,stid:l,value:e.value,subtext:e.subtext,activeSuggestion:-1!==t&&t===(null===(i=e.data)||void 0===i?void 0:i.index),historyDetail:v})})))}));case"uncategorized":return D(e.items)?w():(n=e.items)&&n.map((function(e,n){return C.createElement(C.Fragment,{key:n},i&&C.createElement(G.v,{spacing:"relaxed",className:ee("uitk-typeahead-result-title")},C.createElement("div",{className:ee("uitk-typeahead-result-title-label","truncate")},e.title)),C.createElement(Q,{className:te(e),data:e.data,key:n,index:n,icon:e.icon,name:e.name,onResultItemSelect:b,stid:l,value:e.value,subtext:e.subtext,activeSuggestion:-1!==t&&t===n,contentRef:m,historyDetail:v}))}))}var n,s}(I),n&&r&&!function(e){switch(e.type){case"categorized":return _(e.items);case"uncategorized":return D(e.items)}}(I)&&C.createElement(Q,{icon:"search",name:S.formatText("typeahead.searchFor",[r]),onResultItemSelect:b,index:N,stid:l,value:r,sanitized:!0,activeSuggestion:!(-1===t||t!==N),historyDetail:v})),C.createElement(Y,{results:I})))},ie=n(36326),se=o.classNames.bind(W()),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.placeholder,i=e.required,o=(0,s.__rest)(e,["className","placeholder","required"]),a=se("uitk-typeahead-input",t);return C.createElement(ie.n,(0,s.__assign)({},o,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:a,type:"text",spellCheck:!1,placeholder:n,required:i}))},t.displayName="UitkTypeaheadInput",t}(C.Component),ae=o.classNames.bind(W());!function(e){e.UP="UP",e.DOWN="DOWN"}(m||(m={}));var re,le=function(e){function t(t){var n=e.call(this,t)||this;return n.dialogRef=C.createRef(),n.toolbarInputRef=C.createRef(),n.iphoneSafariUARegex=/iphone.*safari|safari.*iphone/gi,n.uid=Math.random().toString(36).substring(7),n.typeaheadDialogLiveAnnounceId="uitk-typeahead-dialog-live-announce-".concat(n.uid),n.typingTimeout=0,n.newAttr=-1,n._isMounted=!1,n.state={activeSuggestion:-1,categorizedResults:[],data:{},results:[],searchTerm:t.term,showResults:!0,startSearchTerm:t.startSearchTerm,isCurrentLocation:!1},n.announceResults=n.announceResults.bind(n),n.focusInput=n.focusInput.bind(n),n.handleChange=n.handleChange.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleKeyUp=n.handleKeyUp.bind(n),n.handleAnnounceResults=n.handleAnnounceResults.bind(n),n.handleResultItemSelect=n.handleResultItemSelect.bind(n),n.onDismiss=n.onDismiss.bind(n),n.openDialog=n.openDialog.bind(n),n.updateResults=n.updateResults.bind(n),n.updateResultsDebounced=t.debounceRate&&t.debounceRate>0?(0,L.debounce)(t.debounceRate,n.updateResults):n.updateResults,n.updateInput=n.updateInput.bind(n),n.selectInput=n.selectInput.bind(n),n.resetActiveSuggestion=n.resetActiveSuggestion.bind(n),n.removeDialogLiveAnnounce=n.removeDialogLiveAnnounce.bind(n),n.contentRef=C.createRef(),n}return(0,s.__extends)(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentDidUpdate=function(e,n){var i=this.props.term;i!==e.term&&this.setState({searchTerm:i});var s=this.state,o=s.searchTerm,a=s.showResults;n.searchTerm!==o&&a&&(this.setState({results:t.placeholder}),this.updateResultsDebounced(o))},t.prototype.componentWillUnmount=function(){var e=this.props.adapter;e&&"function"==typeof e.logTypeaheadDismiss&&e.logTypeaheadDismiss(),this._isMounted=!1},t.prototype.handleChange=function(e){var t=this.props,n=t.updateCachedSearchTerm,i=t.onInputChange;this.setState({searchTerm:e.target.value,showResults:!0,isCurrentLocation:!1},this.focusInput),""===e.target.value&&this.resetActiveSuggestion(),i&&i(e),n&&n(e)},t.prototype.handleResultItemSelect=function(e,t,n){var i,s=this,a=this.props,r=a.isMulti,c=a.adapter,u=a.l10n,h=a.label,d=a.onResultItemSelect,p=this.state.searchTerm;return null===(i=c.onItemSelection)||void 0===i?void 0:i.call(c,t).then((function(i){r?s.setState({activeSuggestion:-1}):s.setState({activeSuggestion:-1,searchTerm:e,showResults:!1,isCurrentLocation:(null==t?void 0:t.type)===l.CURRENT_LOCATION}),d(e,i);var a=n?T(n)-1:0;r&&(0,o.liveAnnounce)("".concat(u.formatText("typeahead.announceResults.itemSelected",e),"\n             ").concat(u.formatText("typeahead.announceResults.showingResults",h,a,p)),void 0,void 0,s.contentRef,s.typeaheadDialogLiveAnnounceId),r||(setTimeout((function(){(0,o.liveAnnounce)("".concat(u.formatText("typeahead.announceResults.itemSelected",e),"\n             ").concat(u.formatText("typeahead.announceResults.menuClosed")))}),100),s.onDismiss())})).catch((function(){s.updateResults(e,!0,""!==e),s.onDismiss()}))},t.prototype.handleAnnounceResults=function(e){var t=this;this.typingTimeout&&clearTimeout(this.typingTimeout),e.length>0&&(this.typingTimeout=setTimeout((function(){t.announceResults(e)}),1e3))},t.prototype.handleKeyPress=function(e){var t=this.props.value,n=R(this.getResultsToShow(),Array.isArray(t)?t:[]),i=this.state,s=i.activeSuggestion,o=i.searchTerm;if("Enter"!==e.key&&38!==e.keyCode&&40!==e.keyCode||e.preventDefault(),"Enter"===e.key){var a=S(n,s);a?this.handleResultItemSelect(a.value,a.data,n):this.handleResultItemSelect(o,void 0,n)}},t.prototype.handleActiveSuggestion=function(e){var t=this.state,n=t.activeSuggestion,i=t.results,s=t.searchTerm,o=this.props.allowExactMatch&&s?1:0,a=i.length+o,r=0;e===m.UP?r=-1===n?a:a-1:e===m.DOWN&&(r=a+1);var l=(n+r)%a,c=(this.newAttr+r)%a;this.setState({activeSuggestion:this.newAttr>-1?c:l}),this.newAttr=-1},t.prototype.handleUpArrowKey=function(e){38===e.keyCode&&this.handleActiveSuggestion(m.UP)},t.prototype.handleDownArrowKey=function(e){40===e.keyCode&&this.handleActiveSuggestion(m.DOWN)},t.prototype.handleTabKey=function(e){if(9===e.keyCode||e.shiftKey&&9===e.keyCode){var t=e.target.parentElement.getAttribute("data-index");this.newAttr=t?Number(t):-1}},t.prototype.handleEscKey=function(e){27===e.keyCode&&this.onDismiss()},t.prototype.handleKeyDown=function(e){this.handleDownArrowKey(e),this.handleUpArrowKey(e),this.handleEscKey(e)},t.prototype.handleKeyUp=function(e){this.handleTabKey(e)},t.prototype.onDismiss=function(){var e=this.props,t=e.onDismiss,n=e.isMulti,i=e.l10n;this.contentRef.current.scrollTop=0,t&&t(),this.resetActiveSuggestion(),this.setState({startSearchTerm:""}),n&&setTimeout((function(){(0,o.liveAnnounce)(i.formatText("typeahead.announceResults.menuClosed"))}),100),this.removeDialogLiveAnnounce()},t.prototype.getResultsToShow=function(){var e=this.props.categorize,t=this.state,n=t.categorizedResults,i=t.results;return e||n&&n.length?{items:n,type:"categorized"}:{items:i,type:"uncategorized"}},t.prototype.removeDialogLiveAnnounce=function(){var e,t=document.getElementById(this.typeaheadDialogLiveAnnounceId);t&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t))},t.prototype.resetActiveSuggestion=function(){this.setState({activeSuggestion:-1})},t.prototype.updateInput=function(e,t){var n=this;this.setState({searchTerm:e},(function(){n.updateResults(e,!1,!!t),setTimeout((function(){n.selectInput()}))}))},t.prototype.scrollTop=function(){navigator.userAgent.match(this.iphoneSafariUARegex)&&document.getElementsByTagName("html")[0].scrollTop>0&&document.getElementsByTagName("html")[0].scrollTo({top:0,behavior:"smooth"})},t.prototype.openDialog=function(){var e=this.state.searchTerm,t=this.props,n=t.adapter,i=t.startSearchTerm,s=t.defaultTerm;n.typeaheadDialogOpened(e),this.updateInput(e||s||i||"",""!==e),this.focusInput(),this.scrollTop()},t.prototype.selectInput=function(){var e=this.toolbarInputRef;e&&e.current&&"function"==typeof e.current.select&&e.current.select()},t.prototype.focusInput=function(){var e=this.toolbarInputRef;e&&e.current&&"function"==typeof e.current.focus&&e.current.focus()},t.prototype.announceResults=function(e){var t=this.state.searchTerm,n=this.props,i=n.l10n,s=n.label,a=n.defaultTerm,r=t&&t.split("");if(r){var l="'".concat(r.join("' , '")," '");e&&(0,o.liveAnnounce)(i.formatText("typeahead.announceResults.resultsAvailable",l,e.length),void 0,void 0,this.contentRef,this.typeaheadDialogLiveAnnounceId)}else a&&e&&(0,o.liveAnnounce)(i.formatText("typeahead.announceResults.showingResultsDefault",s,e.length))},t.prototype.isCategorizedResult=function(e){return"object"==typeof e&&"heading"in e},t.prototype.updateResults=function(e,t,n){return(0,s.__awaiter)(this,void 0,void 0,(function(){var i,o,a,r,l,c,u,h,d,p,g,f,y,m,v=this;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return i=this.props,o=i.adapter,a=i.categorize,r=i.defaultTerm,l=this.state.isCurrentLocation,c=""===e||l?null!=r?r:"":e,this.lastSearchTerm=c,""===c||!0!==t?[3,5]:a?[4,Promise.all([o.fetchResultsCategorized(c),o.fetchRecentSearchResultsCategorized()])]:[3,2];case 1:return f=s.sent(),[3,4];case 2:return[4,Promise.all([o.fetchResults(c),o.fetchRecentSearchResults()])];case 3:f=s.sent(),s.label=4;case 4:return p=(d=f)[0],(g=d[1])&&g.length>0?a||this.isCategorizedResult(g[0])?h=g:u=g:a?h=p:u=p,[3,11];case 5:return a?[4,o.fetchResultsCategorized(c)]:[3,7];case 6:return h=s.sent(),[3,11];case 7:return""!==c&&n?[4,o.fetchAlternativeResults(c)]:[3,9];case 8:return(y=s.sent())&&y.length&&this.isCategorizedResult(y[0])?h=y:u=y,[3,11];case 9:return[4,o.fetchResults(c)];case 10:(y=s.sent())&&y.length&&this.isCategorizedResult(y[0])?h=y:u=y,s.label=11;case 11:return this.lastSearchTerm!==c||(u&&u.length&&this._isMounted?(o.logSuggestionShown(t||n?"":c,u),this.setState({results:u,categorizedResults:[]},(function(){v.handleAnnounceResults(u)}))):h&&h.length?(o.logSuggestionShown(t||n?"":c,h),m=h.reduce((function(e,t){return e.push.apply(e,t.typeaheadResults),e}),[]),this.setState({categorizedResults:h,results:m},(function(){v.handleAnnounceResults(h)}))):this._isMounted&&this.setState({results:[],categorizedResults:[]})),[2]}}))}))},t.prototype.render=function(){var e=this.props,t=e.allowExactMatch,n=e.dialog,i=e.id,s=e.listTitle,o=e.stid,a=e.placeholder,r=e.label,l=e.handleClear,c=e.emptyResultPlaceholder,u=e.isMulti,h=e.dismissButtonText,d=e.clearAllText,p=e.onClearAll,g=e.onItemRemove,f=e.selectedItemHeading,y=e.value,m=e.strictFullscreen,v=e.typeaheadInputRef,T=e.required,R=this.state,S=R.activeSuggestion,E=R.searchTerm,I=this.getResultsToShow();return C.createElement(P.U,{isVisible:n,openCallback:this.openDialog},C.createElement(M.K,{className:ae("uitk-typeahead-dialog",{"uitk-typeahead-dialog-centered":!m}),isVisible:n,type:m?"full":"centered",triggerRef:v},C.createElement(O.v,{direction:"column",blockSize:"full_size"},C.createElement(D.t,null,C.createElement(x.b,{className:ae("uitk-typeahead-input-wrapper"),navigationContent:{navIconLabel:"Close the dialog",onClick:this.onDismiss,navButtonId:"".concat(i,"-close")}},C.createElement(oe,{className:ae("uitk-typeahead-input-v2"),"data-stid":o&&"".concat(o,"-dialog-input"),domRef:this.toolbarInputRef,hasClearButton:E.length>0,hasFloatedLabel:!1,hasVisibleLabel:!1,id:o,label:r,onChange:this.handleChange,onKeyPress:this.handleKeyPress,placeholder:a,value:E,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,handleClear:l,required:T}))),C.createElement(D.t,null,C.createElement(k.z,{className:ae("uitk-typeahead-dialog-content"),contentDomRef:this.contentRef,padded:!1},C.createElement(O.v,{direction:"column",blockSize:"full_size",justifyContent:"space-between"},C.createElement(D.t,null,C.createElement(ne,{allowExactMatch:t,typeaheadLabel:r,onResultItemSelect:this.handleResultItemSelect,results:I,searchTerm:E,stid:o,listTitle:s,activeSuggestion:S,emptyResultPlaceholder:c,isMulti:u,dismissButtonText:h,selectedItemHeading:f,clearAllText:d,onClearAll:p,onItemRemove:g,value:y,contentRef:this.contentRef,historyDetail:this.props.historyDetail})),this.props.isMulti?C.createElement(D.t,null,C.createElement(_.o,{type:w.k.BUTTON},C.createElement(b.t,{disabled:0===(null==y?void 0:y.length),onClick:this.onDismiss,isFullWidth:!0},h))):null))))))},t.placeholder=[{disabled:!0,icon:"brightness_1",name:" ",value:" ",title:" "}],t}(C.Component),ce=function(e){var t=(0,E.useLocalization)();return C.createElement(le,(0,s.__assign)({l10n:t},e))},ue=n(70094),he=o.classNames.bind(W()),de=function(e){return""===e||Array.isArray(e)&&0===e.length};!function(e){e.UP="UP",e.DOWN="DOWN"}(re||(re={}));var pe,ge=function(e){function t(t){var n=e.call(this,t)||this;n.keyPressed=!1,n.newAttr=-1,n.toolbarInputRef=C.createRef(),n.typingTimeout=0;var i=n.props,s=i.dialog,o=i.term,a=i.debounceRate;return n.state={activeSuggestion:-1,categorizedResults:[],data:{},menu:s,results:[],searchTerm:o,showResults:!0},n.handleChange=n.handleChange.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleKeyUp=n.handleKeyUp.bind(n),n.handleFocus=n.handleFocus.bind(n),n.handleResultItemSelect=n.handleResultItemSelect.bind(n),n.focusInput=n.focusInput.bind(n),n.announceResults=n.announceResults.bind(n),n.onDismiss=n.onDismiss.bind(n),n.updateResults=n.updateResults.bind(n),n.updateResultsDebounced=a&&a>0?(0,L.debounce)(a,n.updateResults):n.updateResults,n.menuOpened=n.menuOpened.bind(n),n.menuClosed=n.menuClosed.bind(n),n.resetActiveSuggestion=n.resetActiveSuggestion.bind(n),n.resultsDomRef=C.createRef(),n}return(0,s.__extends)(t,e),t.prototype.componentDidUpdate=function(e,n){var i=this.state,s=i.searchTerm,a=i.results,r=i.showResults,l=this.props,c=l.label,u=l.l10n,h=l.value,d=l.defaultTerm,p=a&&a.length,g=this.isTypeAheadFocused();de(h)&&de(s)&&g&&!d&&(0,o.liveAnnounce)(u.formatText("typeahead.announceResults.trigerLabel",c)),n.searchTerm===s&&!de(h)&&!1===this.keyPressed&&g&&(0,o.liveAnnounce)(u.formatText("typeahead.announceResults.showingResults",c,p,s)),n.searchTerm!==s&&r&&(this.setState({results:t.placeholder}),this.updateResultsDebounced(s)),this.focusInput()},t.prototype.handleFocus=function(){this.selectInput()},t.prototype.handleResultItemSelect=function(e,t,n){var i,s=this,a=this.props,r=a.adapter,l=a.isMulti,c=a.onResultItemSelect,u=a.label,h=a.l10n,d=this.state.searchTerm;return null===(i=r.onItemSelection)||void 0===i?void 0:i.call(r,t).then((function(t){l?s.setState({activeSuggestion:-1}):s.setState({activeSuggestion:-1,searchTerm:e,showResults:!1}),c(e,t);var i=n?T(n)-1:0;l&&(0,o.liveAnnounce)("".concat(h.formatText("typeahead.announceResults.itemSelected",e),"\n             ").concat(h.formatText("typeahead.announceResults.showingResults",u,i,d))),l||(setTimeout((function(){(0,o.liveAnnounce)("".concat(h.formatText("typeahead.announceResults.itemSelected",e)," \n            ").concat(h.formatText("typeahead.announceResults.menuClosed")))}),100),s.menuClosed())})).catch((function(){s.updateResults(e,!0,""!==e),s.menuClosed()}))},t.prototype.handleAnnounceResults=function(e){var t=this;this.typingTimeout&&clearTimeout(this.typingTimeout),(null==e?void 0:e.length)>0&&(this.typingTimeout=setTimeout((function(){t.announceResults(e)}),1e3))},t.prototype.handleKeyPress=function(e){var t=this.state,n=t.activeSuggestion,i=t.searchTerm,s=this.props,a=s.value,r=s.l10n;this.keyPressed=!0;var l=R(this.getResultsToShow(),Array.isArray(a)?a:[]),c=l&&T(l);this.keyPressed=!0;var u=i&&i.split("");if(u){var h="'".concat(u.join("' , '")," '");""!==i&&c>0&&(0,o.liveAnnounce)(r.formatText("typeahead.announceResults.resultsAvailable",h,c))}if("Enter"!==e.key&&38!==e.keyCode||e.preventDefault(),"Enter"===e.key){var d=S(l,n);d?this.handleResultItemSelect(d.value,d.data,l):this.handleResultItemSelect(i,void 0,l)}},t.prototype.handleChange=function(e){var t=this.props,n=t.onInputChange,i=t.updateCachedSearchTerm;this.setState({searchTerm:e.target.value,showResults:!0},this.focusInput),""===e.target.value&&this.resetActiveSuggestion(),n&&n(e),i&&i(e)},t.prototype.handleActiveSuggestion=function(e){var t=this.state,n=t.activeSuggestion,i=t.results,s=t.searchTerm,o=this.props.allowExactMatch&&s?1:0,a=i.length+o,r=0;e===re.UP?r=-1===n?a:a-1:e===re.DOWN&&(r=a+1);var l=(n+r)%a,c=(this.newAttr+r)%a;this.setState({activeSuggestion:this.newAttr>-1?c:l}),this.newAttr=-1},t.prototype.handleUpArrowKey=function(e){38===e.keyCode&&(e.preventDefault(),this.handleActiveSuggestion(re.UP))},t.prototype.handleDownArrowKey=function(e){40===e.keyCode&&(this.keyPressed=!0,this.handleActiveSuggestion(re.DOWN))},t.prototype.handleTabKey=function(e){if(9===e.keyCode||e.shiftKey&&9===e.keyCode){var t=e.target.parentElement.getAttribute("data-index");this.newAttr=t?Number(t):-1}},t.prototype.handleEscKey=function(e){27===e.keyCode&&this.onDismiss()},t.prototype.handleKeyDown=function(e){this.handleDownArrowKey(e),this.handleUpArrowKey(e),this.handleEscKey(e)},t.prototype.handleKeyUp=function(e){this.handleTabKey(e)},t.prototype.onDismiss=function(){var e=this.props,t=e.isMulti,n=e.onDismiss,i=e.l10n;this.keyPressed=!1,this.resultsDomRef.current&&(this.resultsDomRef.current.scrollTop=0),n&&n(),t&&(0,o.liveAnnounce)(i.formatText("typeahead.announceResults.menuClosed"))},t.prototype.getResultsToShow=function(){var e=this.props.categorize,t=this.state,n=t.categorizedResults,i=t.results;return e||n&&n.length?{items:n,type:"categorized"}:{items:i,type:"uncategorized"}},t.getDerivedStateFromProps=function(e,t){var n=e.term===t.searchTerm||e.dialog?t.searchTerm:e.term;return e.isMulti?null:{searchTerm:n}},t.prototype.menuClosed=function(){var e=this.props,t=e.adapter,n=e.onDismiss;t&&"function"==typeof t.logTypeaheadDismiss&&t.logTypeaheadDismiss(),n&&n(),this.resetActiveSuggestion()},t.prototype.menuOpened=function(){var e=this.props.defaultTerm,t=this.state.searchTerm;this.resultsDomRef.current&&(this.resultsDomRef.current.scrollTop=0),this.selectInput(),this.updateResults(!t&&e?e:t,!1,""!==t)},t.prototype.announceResults=function(e){var t=this.state.searchTerm,n=this.props,i=n.l10n,s=n.label,a=n.defaultTerm,r=t&&t.split("");if(r){var l="'".concat(r.join("' , '")," '");e&&this.isTypeAheadFocused()&&(0,o.liveAnnounce)(i.formatText("typeahead.announceResults.resultsAvailable",l,e.length))}else a&&e&&this.isTypeAheadFocused()&&(0,o.liveAnnounce)(i.formatText("typeahead.announceResults.showingResultsDefault",s,e.length))},t.prototype.isCategorizedResult=function(e){return"heading"in e},t.prototype.updateResults=function(e,t,n){return(0,s.__awaiter)(this,void 0,void 0,(function(){var i,o,a,r,l,c,u,h,d,p,g,f,y,m=this;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return this.lastSearchTerm=e,i=this.props,o=i.adapter,a=i.categorize,r=i.defaultTerm,""!==(d=""===e?null!=r?r:"":e)&&t?a?[4,Promise.all([o.fetchResultsCategorized(d),o.fetchRecentSearchResultsCategorized()])]:[3,2]:[3,5];case 1:return p=s.sent(),[3,4];case 2:return[4,Promise.all([o.fetchResults(d),o.fetchRecentSearchResults()])];case 3:p=s.sent(),s.label=4;case 4:return u=(y=p)[0],(h=y[1])&&h.length>0?a||this.isCategorizedResult(h[0])?c=h:l=h:a?c=u:l=u,[3,11];case 5:return a?[4,o.fetchResultsCategorized(d)]:[3,7];case 6:return c=s.sent(),[3,11];case 7:return""!==d&&n?[4,o.fetchAlternativeResults(d)]:[3,9];case 8:return(g=s.sent())&&g.length&&this.isCategorizedResult(g[0])?c=g:l=g,[3,11];case 9:return[4,o.fetchResults(d)];case 10:(g=s.sent())&&g.length&&this.isCategorizedResult(g[0])?c=g:l=g,s.label=11;case 11:return this.lastSearchTerm!==e||(l&&l.length?(o.logSuggestionShown(t||n?"":e,l),this.setState({results:l,categorizedResults:[]},(function(){m.handleAnnounceResults(l)}))):c&&c.length?(o.logSuggestionShown(t||n?"":e,c),f=c.flatMap((function(e){return e.typeaheadResults})),this.setState({categorizedResults:c,results:f},(function(){m.handleAnnounceResults(l)}))):this.setState({results:[],categorizedResults:[]})),[2]}}))}))},t.prototype.selectInput=function(){var e=this.toolbarInputRef;e&&e.current&&"function"==typeof e.current.select&&e.current.select()},t.prototype.focusInput=function(){var e=this.toolbarInputRef;e&&e.current&&"function"==typeof e.current.focus&&(0,o.isElementVisible)(this.toolbarInputRef.current)&&e.current.focus()},t.prototype.resetActiveSuggestion=function(){this.setState({activeSuggestion:-1})},t.prototype.isTypeAheadFocused=function(){return this.toolbarInputRef.current===document.activeElement},t.prototype.render=function(){var e=this.props,t=e.allowExactMatch,n=e.children,i=e.dialog,s=e.stid,o=e.label,a=e.listTitle,r=e.placeholder,l=e.handleClear,c=e.emptyResultPlaceholder,u=e.dismissButtonText,h=e.value,d=e.isMulti,p=e.clearAllText,g=e.onClearAll,f=e.onItemRemove,y=e.selectedItemHeading,m=e.typeaheadInputRef,v=e.historyDetail,T=e.required,R=this.state,S=R.activeSuggestion,E=R.searchTerm,I=this.getResultsToShow();return C.createElement("div",{className:he("uitk-menu-typeahead-wrapper")},C.createElement("div",{className:he("uitk-typeahead-menu"),id:s&&"".concat(s,"-menu")},C.createElement("div",{className:he("uitk-menu-trigger")},n),C.createElement(P.U,{isVisible:i,openCallback:this.menuOpened},C.createElement(M.K,{autoFocus:!1,type:"popover",className:he("uitk-typeahead-menu-container",{"is-multi":d}),disableArrowKeyHandler:!0,isVisible:i,onDismiss:this.menuClosed,triggerRef:m,showOverTrigger:!0,autoPosition:!1},C.createElement(O.v,{direction:"column",blockSize:"full_size"},C.createElement(D.t,null,C.createElement("div",{className:he("uitk-typeahead-input-wrapper")},C.createElement(oe,{className:he("uitk-typeahead-input-v2"),"data-stid":s&&"".concat(s,"-menu-input"),domRef:this.toolbarInputRef,handleClear:l,hasClearButton:E.length>0,hasFloatedLabel:!1,hasVisibleLabel:!1,id:s,label:o,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:r,required:T,value:E}))),C.createElement(D.t,null,C.createElement(k.z,{className:he("uitk-typeahead-menu-content"),padded:!1},C.createElement(ne,{typeaheadLabel:o,allowExactMatch:t,onResultItemSelect:this.handleResultItemSelect,results:I,searchTerm:E,stid:s,listTitle:a,activeSuggestion:S,emptyResultPlaceholder:c,isMulti:d,dismissButtonText:u,selectedItemHeading:y,clearAllText:p,onClearAll:g,onItemRemove:f,value:h,domRef:this.resultsDomRef,historyDetail:v}))),d&&C.createElement(D.t,null,C.createElement(O.v,{justifyContent:"end",className:he("uitk-typeahead-menu-footer")},C.createElement(D.t,null,C.createElement(ue.Y,{disabled:0===(null==h?void 0:h.length),onClick:this.onDismiss},u)))))))))},t.placeholder=[{disabled:!0,icon:"brightness_1",name:" ",value:" ",title:" "}],t}(C.Component),fe=function(e){var t=(0,E.useLocalization)();return C.createElement(ge,(0,s.__assign)({l10n:t},e))},ye=o.classNames.bind(W()),me="typeahead.enteringInput";!function(e){e.MENU="menu",e.DIALOG="dialog",e.ADAPTIVE="adaptive"}(pe||(pe={}));var ve,Te=function(e){function t(t){var n=e.call(this,t)||this;return n.keyArray=[],n.state={dialog:!1,mounted:!1,searchTerm:"",startSearchTerm:"",cachedSearchTerm:""},t.isMulti&&!Array.isArray(t.value)&&console.warn("Use an array of values if set to isMulti"),n.typeaheadInputRef=C.createRef(),n.handleResultItemSelect=n.handleResultItemSelect.bind(n),n.dismissTypeahead=n.dismissTypeahead.bind(n),n.openTypeahead=n.openTypeahead.bind(n),n.renderDialog=n.renderDialog.bind(n),n.renderMenu=n.renderMenu.bind(n),n.handleClear=n.handleClear.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.focusTypeaheadInput=n.focusTypeaheadInput.bind(n),n.renderMenuTypeahead=n.renderMenuTypeahead.bind(n),n.renderDialogTypeahead=n.renderDialogTypeahead.bind(n),n.updateStartSearchTerm=n.updateStartSearchTerm.bind(n),n.updateCachedSearchTerm=n.updateCachedSearchTerm.bind(n),n}return(0,s.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n;return e.isMulti?(0,s.__assign)((0,s.__assign)({},t),{searchTerm:""}):e.value!==t.searchTerm?(0,s.__assign)((0,s.__assign)({},t),{searchTerm:null!==(n=e.value)&&void 0!==n?n:""}):null},t.prototype.componentDidMount=function(){var e=this.props,t=e.value,n=e.onMountCB,i=e.isMulti;Array.isArray(t)&&i&&this.setState({searchTerm:t.join(", ")}),this.setState({mounted:!0}),n&&n(this.typeaheadInputRef)},t.prototype.handleKeyPress=function(e,t){var n=e.keyCode||e.which,i=e.key;if(n>=65&&n<=90||n>=97&&n<=122){this.keyArray.push(i);var s=this.keyArray.join("");t===pe.DIALOG&&this.updateStartSearchTerm(t,s)}},t.prototype.handleClear=function(){var e=this.props.handleClear;this.setState({searchTerm:""}),"function"==typeof e&&e()},t.prototype.handleResultItemSelect=function(e,t){var n,i=this.props,s=i.onUpdate,o=i.isMulti,a=i.onResultSelection,r=i.id;if(s&&s({term:e,data:t}),a){var l=new CustomEvent("change"),c=document.createElement("input");c.value=e,(t&&t.id||r)&&c.setAttribute("id",null!==(n=t.id)&&void 0!==n?n:r),c.addEventListener("change",(function(e){a(e)})),c.dispatchEvent(l)}o||(this.setState({searchTerm:e}),this.focusTypeaheadInput())},t.prototype.getAdapter=function(){var e=this.props,t=e.adapter,n=e.l10n;return t instanceof v&&t.setL10n(n),t},t.prototype.dismissTypeahead=function(e){var t=this.props.onDismiss,n=(0,o.isElementVisible)(this.typeaheadInputRef.current);"function"==typeof t&&t(e),this.setState({dialog:!1,startSearchTerm:""}),this.keyArray=[],this.typeaheadInputRef.current&&n&&this.typeaheadInputRef.current.focus()},t.prototype.updateStartSearchTerm=function(e,t){var n=this;this.setState({startSearchTerm:t},(function(){"dialog"===e&&n.openTypeahead(e)}))},t.prototype.openTypeahead=function(e){var t=this.props,n=t.adapter,i=t.onClick,s=this.state,o=s.dialog,a=s.searchTerm,r=o;e===pe.MENU?r?this.dismissTypeahead(e):("function"==typeof i&&i(e),this.setState({dialog:!0}),setTimeout((function(){n.typeaheadDialogOpened(a)}))):e===pe.DIALOG&&("function"==typeof i&&i(e),this.setState({dialog:!0}))},t.prototype.focusTypeaheadInput=function(){var e=this.props.l10n;(0,o.liveAnnounce)(e.formatText(me)),this.typeaheadInputRef.current&&this.typeaheadInputRef.current.focus()},t.prototype.updateCachedSearchTerm=function(e){this.setState({cachedSearchTerm:e.target.value})},t.prototype.renderMenu=function(){var e,t=this,n=this.props,i=n.allowExactMatch,o=n.label,a=n.listTitle,r=n.categorize,l=n.onInputChange,c=n.stid,u=n.typeaheadPlaceholder,h=n.typeaheadEmptyResultPlaceholder,d=n.value,p=n.isMulti,g=void 0!==p&&p,f=n.customTrigger,y=n.dismissButtonText,m=n.clearAllText,v=n.handleClear,T=n.onItemRemove,R=n.selectedItemHeading,S=n.l10n,E=n.defaultTerm,I=n.debounceRate,N=n.required,A={onDismiss:function(){t.dismissTypeahead("menu")}},L=this.state,b=L.dialog,O=L.searchTerm,D=L.cachedSearchTerm,_=this.getAdapter();return r&&_.setTypeaheadCategories(),C.createElement(fe,(0,s.__assign)({},A,{isMulti:g,value:d,label:o,adapter:_,dialog:f&&f.showTypeahead||b,allowExactMatch:i,onInputChange:l,onResultItemSelect:this.handleResultItemSelect,stid:c,term:null!==(e=O||D)&&void 0!==e?e:E,placeholder:u,emptyResultPlaceholder:h,listTitle:a,categorize:r,handleClear:this.handleClear,clearAllText:m,onClearAll:v,dismissButtonText:null!=y?y:S.formatText("typeahead.multiselect.dismiss"),onItemRemove:T,selectedItemHeading:R,defaultTerm:E,debounceRate:I,typeaheadInputRef:this.typeaheadInputRef,historyDetail:_.isHistoryDetailEnabled(),required:N,updateCachedSearchTerm:this.updateCachedSearchTerm}))},t.prototype.renderDialog=function(){var e=this,t=this.props,n=t.allowExactMatch,i=t.id,o=t.label,a=t.listTitle,r=t.categorize,l=t.onInputChange,c=t.stid,u=t.typeaheadPlaceholder,h=t.typeaheadEmptyResultPlaceholder,d=t.customTrigger,p=t.defaultTerm,g=t.isMulti,f=void 0!==g&&g,y=t.clearAllText,m=t.handleClear,v=t.dismissButtonText,T=t.selectedItemHeading,R=t.onItemRemove,S=t.value,E=t.l10n,I=t.debounceRate,N=t.strictFullscreen,A=t.required,L=this.state,b=L.dialog,O=L.searchTerm,D=L.startSearchTerm,_=L.cachedSearchTerm,w=this.getAdapter();r&&w.setTypeaheadCategories();var P={onDismiss:function(){e.dismissTypeahead(pe.DIALOG)}};return C.createElement(ce,(0,s.__assign)({adapter:w,allowExactMatch:n,dialog:d&&d.showTypeahead||b,id:i,label:o},P,{onInputChange:l,onResultItemSelect:this.handleResultItemSelect,term:O||_,startSearchTerm:D,stid:c,placeholder:u,emptyResultPlaceholder:h,listTitle:a,categorize:r,handleClear:this.handleClear,defaultTerm:p,isMulti:f,clearAllText:y,onClearAll:m,dismissButtonText:null!=v?v:E.formatText("typeahead.multiselect.dismiss"),onItemRemove:R,selectedItemHeading:T,value:S,debounceRate:I,strictFullscreen:N,typeaheadInputRef:this.typeaheadInputRef,historyDetail:w.isHistoryDetailEnabled(),required:A,updateCachedSearchTerm:this.updateCachedSearchTerm}))},t.prototype.renderTrigger=function(e){var n=this,i=this.props,s=i.accessibilityLabel,a=i.analytics,r=i.icon,l=i.hasClearButton,c=i.hasVisibleLabel,u=i.invalid,h=i.label,d=i.name,p=i.placeholder,g=i.stid,f=i.customTrigger,y=i.children,m=i.isMulti,v=i.value,T=i.required,R=this.state,S=R.mounted,E=R.searchTerm,I=R.dialog,L=s||h,b="menu"===e?N.w:oe;return f?y:C.createElement("div",null,S&&C.createElement(A.o,{"aria-label":[L,E].filter((function(e){return e&&e.length>0})).join(" "),"aria-expanded":I,icon:r,label:h,hasClearButton:l,handleClear:this.handleClear,"aria-describedby":u&&g?"".concat(g,"-input-error"):void 0,"data-stid":g&&e===pe.MENU?"".concat(g,"-menu-trigger"):g&&"dialog"===e?"".concat(g,"-dialog-trigger"):"",domRef:this.typeaheadInputRef,onClick:function(){n.openTypeahead(e)},onKeyPress:function(t){n.handleKeyPress(t,e)},onClickCapture:a&&o.analyticsTracker.bind(this,a,""),placeholder:p,value:m?v.join(", "):v,invalid:u,required:T}),C.createElement(b,{className:ye({"is-hidden":S}),icon:r,label:h,"data-stid":g&&"".concat(g,"-input"),domRef:this.typeaheadInputRef,hasClearButton:!1,hasVisibleLabel:c,name:d,onChange:t.defaultProps.onInputChange,placeholder:p,value:E,id:g&&"".concat(g,"-input"),required:T}))},t.prototype.renderMenuTypeahead=function(){var e=this.props,t=e.renderMenu,n=e.customTrigger,i=this.state.dialog,s=n&&n.showTypeahead||i;return t?t(this.renderMenu()):C.createElement(C.Fragment,null,C.createElement("div",{className:ye("uitk-typeahead-menu-layer",{"uitk-typeahead-menu-layer-responsive":s,"is-hidden":!s})},this.renderMenu()),this.renderTrigger(pe.MENU))},t.prototype.renderDialogTypeahead=function(){var e=this.props,t=e.renderDialog,n=e.customTrigger,i=this.state.dialog,s=n&&n.showTypeahead||i;return C.createElement(C.Fragment,null,t?i?t(this.renderDialog()):null:C.createElement("div",{className:ye("uitk-typeahead-dialog-layer",{"uitk-typeahead-dialog-layer-responsive":s,"is-hidden":!s})},this.renderDialog()),this.renderTrigger(pe.DIALOG))},t.prototype.render=function(){var e=this.props,t=e.renderType,n=e.stid,i=e.isMulti,s=e.value,o=e.onItemRemove,a=e.clearAllText,r=e.showPills,l=e.label;return C.createElement("div",{className:ye("uitk-typeahead"),"data-stid":n},t===pe.DIALOG?this.renderDialogTypeahead():t===pe.MENU?this.renderMenuTypeahead():t===pe.ADAPTIVE?C.createElement(I.Viewport,null,C.createElement(I.ViewSmall,null,this.renderDialogTypeahead()),C.createElement(I.ViewLarge,null,this.renderMenuTypeahead())):"",i&&r?C.createElement($,{typeaheadLabel:l,hideHeading:!0,values:s,stid:n,onItemRemove:o,onClear:this.handleClear,clearAllText:a,className:ye("uitk-spacing-margin-blockstart-three")}):null)},t.displayName="UitkTypeahead",t.defaultProps={hasClearButton:!1,onInputChange:function(){return null},renderType:pe.ADAPTIVE,isMulti:!1},t}(C.Component),Re=C.forwardRef((function(e,t){var n=(0,E.useLocalization)();return C.createElement(Te,(0,s.__assign)({l10n:n,ref:t},e))}));!function(e){e[e.EGTA_BEX_ML_V0=36094]="EGTA_BEX_ML_V0",e[e.EGTA_uTA_Demo=32216]="EGTA_uTA_Demo",e[e.ESS_Two_Line_Display=33686]="ESS_Two_Line_Display",e[e.PWA_ESS_Feedback_Loop_Enable=31052]="PWA_ESS_Feedback_Loop_Enable",e[e.EGTA_Rollout_Feature_Gate_for_Hotel_Property_Name_Filter=37339]="EGTA_Rollout_Feature_Gate_for_Hotel_Property_Name_Filter",e[e.BEX_Driveable_destination_Web=41955]="BEX_Driveable_destination_Web"}(ve||(ve={}));var Se,Ee=function(){function e(){}return e.init=function(e){var t=this;e&&Object.keys(ve).forEach((function(n){var i,s=e[n];if("number"==typeof s?i=s:s&&"number"==typeof s.bucket&&(i=s.bucket),void 0!==i){var o=ve[n];t.experimentMap[o]={id:o,name:n,bucket:i}}}))},e.isBucketed=function(e,t){return void 0===t&&(t=1),e in this.experimentMap&&t===this.experimentMap[e].bucket},e.getClientVariants=function(){var e=this,t=[];return Object.keys(this.experimentMap).forEach((function(n){t.push("".concat(n,".").concat(e.experimentMap[n].bucket))})),t.join("|")},e.experimentMap={},e}(),Ie=function(){function e(){this.query="",this.response=void 0,this.mostRecentSelectedSuggestion=void 0}return e.getSuggestionTypes=function(e){if(e&&e.length>0)return e.map((function(e){return"GOOGLEMAPS"===e.category?"GPA":e.type})).join(",")},e.getSuggestionIds=function(e){if(e&&e.length>0)return e.map((function(e){return"GOOGLEMAPS"===e.category?"".concat(e.sourceName,":").concat(e.sourceId):e.essId?"".concat(e.essId.sourceName,":").concat(e.essId.sourceId):"-:-"})).join(",")},e.prototype.logTypeaheadOpen=function(e){this.interactionStart=Date.now(),this.prefill=e},e.prototype.logTypeaheadRequest=function(e){this.query=e||"",this.mostRecentSelectedSuggestion=void 0,this.response=void 0},e.prototype.logSuggestionShown=function(e){this.response=e},e.prototype.logTypeaheadSelection=function(e){this.mostRecentSelectedSuggestion=this.response.sr[e.index-1]},e.prototype.logTypeaheadEventMessage=function(e){this.selectionTypeaheadEventMessage=e},e.prototype.getMetrics=function(t){var n=this.query===this.prefill?"":this.query,i=this.response&&this.response.sr&&this.response.sr.length>0&&"GOOGLEMAPS"===this.response.sr[0].category,o=t.getDevice&&"function"==typeof t.getDevice?t.getDevice(window.navigator.useragent):void 0;return(0,s.__assign)({contentFlavor:"uitk",deviceType:o,inputLength:n?n.length:0,interactionTime:this.interactionStart?Date.now()-this.interactionStart:void 0,isAddrAutocomplete:i,lob:t.lob,locale:t.locale,pageId:t.client,pointOfSale:window.location.hostname,selectionDepth:this.getSelectionDepth(),siteId:"".concat(t.siteId),suggestionIds:this.response&&e.getSuggestionIds(this.response.sr),suggestionSelected:!!this.mostRecentSelectedSuggestion,suggestionShown:!!(this.response&&this.response.sr&&this.response.sr.length>0),suggestionTypes:this.response&&e.getSuggestionTypes(this.response.sr),textInputElementId:t.inputId,timestamp:Date.now(),type:"TypeaheadInteraction",userAgent:window.navigator.userAgent,userTypedQuery:n,variants:[this.response&&this.response.activeABTests,Ee.getClientVariants()].filter(Boolean).join("|"),zeroResults:this.response&&this.response.sr&&0===this.response.sr.length},this.selectionTypeaheadEventMessage)},e.prototype.getSelectionDepth=function(){return this.mostRecentSelectedSuggestion&&void 0!==this.mostRecentSelectedSuggestion.index?(parseInt(this.mostRecentSelectedSuggestion.index,10)+1).toString():"undefined"},e}(),Ce=function(){function e(){this.entries=[],this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING=10,this.essErrorCount=0,this.TRIGGER_TYPE_FOCUS="focus",this.TRIGGER_TYPE_INPUT="input",this.errorCodes=[],this.proxyRegion=""}return e.isStatusCodeInRange=function(e,t,n){return!isNaN(e)&&(t<=e&&e<=n)},e.prototype.logTypeaheadRequest=function(e){var t=0===e.trim().length?this.TRIGGER_TYPE_FOCUS:this.TRIGGER_TYPE_INPUT,n={query:e,timestamp:Date.now(),triggerType:t};this.entries.push({request:n,responseShown:!1})},e.prototype.logResponse=function(e){var t;this.proxyRegion=(null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t.get("x-proxy-region"))||""},e.prototype.logTypeaheadResponse=function(e){if(e){var t=e.q,n=e.sr?e.sr.length:0,i=this.getRequestMetricEntry(t);if(i){var s=Date.now();i.response={latency:s-i.request.timestamp,query:t,suggestionCount:n,timestamp:s}}}},e.prototype.logSuggestionShown=function(e){var t=this.getResponseMetricEntry(e);t&&(t.responseShown=!0)},e.prototype.logError=function(t){e.isStatusCodeInRange(t,200,299)||this.essErrorCount++,this.errorCodes.push(t)},e.prototype.getMetrics=function(){var e;if(this.entries.length){for(var t={},n=this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING<this.entries.length?this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING:this.entries.length,i=0;i<n;i++){var s=this.entries[i];s.response&&(t["latency".concat(i)]=s.response.latency,0===i&&(t.query0=s.response.query))}t.latencyMedian=this.getMedianLatency();var o=this.getWorstLatencyMetric();t.queryWorst=o?o.response&&o.response.query:void 0,t.latencyWorst=o?o.response&&o.response.latency:void 0;var a=this.entries[this.entries.length-1];return t.queryLast=a.request.query,t.latencyLast=a.response?a.response.latency:void 0,t.totalTriggers=this.entries.length,t.totalSuccess=this.getSuccessMetrics().length,t.totalOnePlusCharTypeaheadShown=this.entries.filter((function(e){return e.request.query&&e.responseShown})).length,t.onFocusTypeaheadShown=(null===(e=this.getResponseMetricEntry(""))||void 0===e?void 0:e.responseShown)||!1,this.essErrorCount>0&&(t.essErrorCount=this.essErrorCount),this.errorCodes.length>0&&(t.error=this.errorCodes.join(",")),t.proxyRegion=this.proxyRegion,t}},e.prototype.getRequestMetricEntry=function(e){for(var t=0,n=this.entries;t<n.length;t++){var i=n[t];if(i.request.query===e&&!i.response)return i}},e.prototype.getResponseMetricEntry=function(e){for(var t=0,n=this.entries;t<n.length;t++){var i=n[t];if(i.request.query===e&&i.response)return i}},e.prototype.getWorstLatencyMetric=function(){for(var e,t=0,n=this.entries;t<n.length;t++){var i=n[t];i.response&&(!e||e.response&&e.response.latency<i.response.latency)&&(e=i)}return e},e.prototype.latencySortFunction=function(e,t){return e.response&&t.response?e.response.latency-t.response.latency:e.response?-1:t.response?1:0},e.prototype.getMedianLatency=function(){var e,t=this.getSuccessMetrics();if(t.sort(this.latencySortFunction),t.length){var n=Math.floor(t.length/2),i=t[n].response.latency;if(t.length%2)e=i;else e=(t[n-1].response.latency+i)/2}return e},e.prototype.getSuccessMetrics=function(){return this.entries.filter((function(e){return e.response}))},e}();!function(e){e.CRITICAL="CRITICAL",e.ERROR="ERROR",e.WARN="WARN",e.INFO="INFO",e.UNKNOWN="UNKNOWN"}(Se||(Se={}));var Ne,Ae,Le=function(){function e(e,t){this.level=e,this.name=t}return e.prototype.toString=function(){return"SystemEvent(level=".concat(this.level.toString()," name=").concat(this.name,")")},e}(),be=function(){function e(t){this.clientLogger=t,e.pm&&e.im||this.initMetrics()}return e.prototype.initLogger=function(t){var n=t.client,i=t.lob,s=t.locale,o=t.siteId,a=t.personalize,r=t.inputId,l=t.getDevice,c=t.variants;e.metadata={client:n,lob:i,locale:s,siteId:o,personalize:a,inputId:r,getDevice:l,variants:c}},e.prototype.logTypeaheadOpen=function(t){e.im.logTypeaheadOpen(t)},e.prototype.logTypeaheadRequest=function(t){e.im.logTypeaheadRequest(t),e.pm.logTypeaheadRequest(t)},e.prototype.logResponse=function(t){e.pm.logResponse(t)},e.prototype.logTypeaheadResponse=function(t){e.pm.logTypeaheadResponse(t)},e.prototype.logSuggestionShown=function(t){e.pm.logSuggestionShown(t.q),e.im.logSuggestionShown(t)},e.prototype.logSuggestionSelected=function(t,n){e.im.logTypeaheadSelection(t),e.im.logTypeaheadEventMessage(n)},e.prototype.logError=function(t){e.pm.logError(t)},e.prototype.logTypeaheadClientMetrics=function(){if(this.clientLogger&&"function"==typeof this.clientLogger.getLoggerWithIdentifier){var t=this.clientLogger.getLoggerWithIdentifier("uitk-react-typeahead");t&&"function"==typeof t.logEvent&&t.logEvent(new Le(Se.INFO,"TypeaheadInteraction"),(0,s.__assign)((0,s.__assign)({},e.im.getMetrics(e.metadata)),e.pm.getMetrics()))}this.initMetrics()},e.prototype.initMetrics=function(){e.im=new Ie,e.pm=new Ce},e}();!function(e){e.CLICK="recommendation_module.selected",e.SEEN="recommendation_module.presented"}(Ne||(Ne={})),function(e){e.SEEN="Impression",e.CLICK="Interaction"}(Ae||(Ae={}));var Oe,De,_e,we,Pe,Me="destination-typeahead-input",ke="allRecommendations",xe={ALTERNATE:"People also searched",POPULAR:"Popular destinations"},Ue=["POPULAR","ALTERNATE"],Ge=function(){function e(){}return e.getRecommendationSeenMessage=function(e,t){if(e&&e.sr&&e.sr.length>0){var n=e.sr.filter((function(e){return Ue.includes(e.category)}));if(n&&n.length>0){var i={eventType:Ae.SEEN,eventName:Ne.SEEN,egRecommendationResponseId:this.getEgRecommendationResponseId(e.recId),recommendationTitle:this.getRecommendationTitle(n[0].category),component:Me,componentElement:t,recommendations:this.getRecommendations(n)};return{schemaName:ke,messageContent:i}}}},e.getRecommendationClickedMessage=function(e,t,n){var i,s;if(e&&Ue.includes(e.category)){var o=e.index;if(t&&t.sr&&t.sr.length>0)for(var a=t.sr.filter((function(t){return t.category===e.category})),r=0;r<a.length;r++)if((null===(i=a[r].essId)||void 0===i?void 0:i.sourceId)===(null===(s=e.essId)||void 0===s?void 0:s.sourceId)){o=r;break}var l={eventType:Ae.CLICK,eventName:Ne.CLICK,egRecommendationResponseId:this.getEgRecommendationResponseId(),recommendationTitle:this.getRecommendationTitle(e.category),component:Me,componentElement:n,recommendations:this.getSelectedRecommendations(e,o)};return{schemaName:ke,messageContent:l}}},e.getEgRecommendationResponseId=function(e){return e&&(this.egRecommendationResponseId=e),this.egRecommendationResponseId},e.getRecommendationTitle=function(e){return this.recommendationTitle||(this.recommendationTitle=xe[e]),this.recommendationTitle},e.getRecommendations=function(e){var t=this,n=[],i=0;return e&&e.length>0&&(e.forEach((function(e){n.push(t.getRecommendation(e,i)),i++})),n.push()),n},e.getSelectedRecommendations=function(e,t){var n=[];return e&&n.push(this.getRecommendation(e,t)),n},e.getRecommendation=function(e,t){var n;return{recommendationId:null===(n=e.essId)||void 0===n?void 0:n.sourceId,rank:t,presentationDetails:{name:e.regionNames.primaryDisplayName}}},e}(),ze=function(){function e(){}return e.init=function(t){if(t&&"function"==typeof t.getLoggerWithIdentifier){var n=t.getLoggerWithIdentifier("uitk-react-typeahead");n&&"function"==typeof n.logEvent&&(e.logger=n)}},e.isOrigin=function(e){return(e=e.toLowerCase()).indexOf("origin")>-1||e.indexOf("from")>-1||e.indexOf("departure")>-1||e.indexOf("drop")>-1||e.indexOf("home")>-1||e.indexOf("loc2")>-1},e.isDestination=function(e){return(e=e.toLowerCase()).indexOf("dest")>-1||e.indexOf("to")>-1||e.indexOf("arrival")>-1||e.indexOf("near")>-1||e.indexOf("pick")>-1||0===e.indexOf("location")},e.getDomElement=function(){var t,n=null===(t=document.querySelectorAll(".uitk-typeahead-dialog-layer-responsive .uitk-typeahead-dialog, .uitk-typeahead-menu-layer-responsive .uitk-typeahead-menu-container")[0])||void 0===t?void 0:t.getElementsByTagName("input")[0];return n||e.logError({message:"Failed to retrieve data for the typeahead UI component"}),n},e.logError=function(t){try{e.logger&&(t=t.stack?{message:t.message,stack:t.stack}:t,e.logger.logEvent(new Le(Se.ERROR,"TypeaheadLoggingError"),t))}catch(n){console.error("unable to log errors from typeahead-client-logger. Reason:".concat(n))}},e.getInputElementId=function(t){var n;return t&&((n=t.getAttribute("data-stid"))||e.logError({message:"Failed to retrieve input element id from 'data-stid'"})),n||e.UNKNOWN},e.getSubLob=function(e,t){t||(t=new URLSearchParams(window.location.search).get("pwaSubLOB")||"");switch(e.toLowerCase()){case"flights":switch(t&&t.toLowerCase()){case"oneway":return"OW";case"multicity":return"MD";default:return"RT"}case"packages":switch(t&&t.toLowerCase()){case"fhc":return"FHC";case"hc":return"HC";case"fc":return"FC";default:return"FH"}default:return""}},e.UNKNOWN="UNKNOWN",e}();!function(e){e.FOCUS="typeaheadFocused",e.BLUR="typeaheadBlurred",e.SELECT="typeaheadSuggestionSelected",e.CURRENT_LOCATION="currentLocation"}(Oe||(Oe={})),function(e){e.TYPEAHEAD_INTERACTION="typeaheadInteraction"}(De||(De={})),function(e){e.O="Origin",e.D="Destination",e.U="UNKNOWN"}(_e||(_e={})),function(e){e.GAIA="GAIA",e.LCM="LCM",e.GOOGLE="GOOGLE",e.UNKNOWN="UNKNOWN"}(we||(we={})),function(e){e.ALTERNATE="Alternate",e.CURRENT_LOCATION="CurrentLocation",e.POPULAR="Popular",e.GOOGLE="Google",e.NORMAL="Normal",e.RECENT_HISTORY="RecentHistory"}(Pe||(Pe={}));var Fe,Ke=function(){function e(e,t){var n,i,s=Oe.CURRENT_LOCATION===e;if(s&&(e=Oe.SELECT),Oe.FOCUS===e?this.typeaheadEvent={event:{name:e,type:De.TYPEAHEAD_INTERACTION},numberOfBackspaces:t.noOfBackspaces,page:{actionLocation:t.fieldName,lineOfBusiness:t.metadata.lob+this.getSublob(t.metadata.lob,t.metadata.subLob),pageName:this.getPageName(t.metadata.client||"",t.href)},searchField:this.getSearchField(t.fieldName),searchFieldContent:(null===(n=t.input)||void 0===n?void 0:n.value)||"",timestamps:{receivedAt:Date.now()}}:this.typeaheadEvent={event:{name:e,type:De.TYPEAHEAD_INTERACTION},numberOfBackspaces:t.noOfBackspaces,page:{actionLocation:t.fieldName,lineOfBusiness:t.metadata.lob+this.getSublob(t.metadata.lob,t.metadata.subLob),pageName:this.getPageName(t.metadata.client||"",t.href)},searchField:this.getSearchField(t.fieldName),searchFieldContent:t.query===t.prefill?"":t.query||"",timestamps:{receivedAt:Date.now()}},Oe.FOCUS===e&&(t.isResolve=!1,t.focusTime=(new Date).toString()),[Oe.SELECT,Oe.BLUR].indexOf(e)>-1){if(t.response&&this.setSuggestionShownFields(t.response),t.selected&&(Oe.BLUR===e&&(this.typeaheadEvent.typeaheadSelection=!0,this.typeaheadEvent.charactersTyped=this.typeaheadEvent.searchFieldContent.length,this.calculateTimeSpendOnTypeaheadInput(t)),this.setSuggestionSelectedFields(t.selected)),void 0===t.selected&&Oe.BLUR===e){this.calculateTimeSpendOnTypeaheadInput(t),this.typeaheadEvent.typeaheadSelection=!1,this.typeaheadEvent.charactersTyped=this.typeaheadEvent.searchFieldContent.length;var o=null===(i=document.getElementsByName("regionId"))||void 0===i?void 0:i.item(0),a=(null==o?void 0:o.value)||"UNKNOWN";this.typeaheadEvent.searchDestination={id:t.isResolve?"UNKNOWN":a,sourceSystem:"UNKNOWN",fullName:t.isResolve?t.query:t.prefill||""}}s&&this.setCurrentLocationSelectedFields()}}return e.prototype.getTypeaheadEventMessage=function(){return{messageContent:this.typeaheadEvent,schemaName:"typeahead"}},e.prototype.getFlattenedJsonMessage=function(){var e,t,n;return{"ta.page.actionLocation":this.typeaheadEvent.page.actionLocation,"ta.page.lob":this.typeaheadEvent.page.lineOfBusiness,"ta.page.name":this.typeaheadEvent.page.pageName,"ta.searchField":this.typeaheadEvent.searchField,"ta.searchFieldContent":this.typeaheadEvent.searchFieldContent,"ta.timestamps.receivedAt":this.typeaheadEvent.timestamps.receivedAt,"ta.noOfSuggestions":this.typeaheadEvent.noOfSuggestions,"ta.requestId":this.typeaheadEvent.serviceRequestLogId,"ta.suggestionType":this.typeaheadEvent.suggestionType,"ta.searchDestination":"".concat(null===(e=this.typeaheadEvent.searchDestination)||void 0===e?void 0:e.sourceSystem,":").concat(null===(t=this.typeaheadEvent.searchDestination)||void 0===t?void 0:t.id),"ta.selectionDepth":this.typeaheadEvent.selectionDepth,"ta.suggestionList":null===(n=this.typeaheadEvent.suggestionList)||void 0===n?void 0:n.map((function(e){return"".concat(e.sourceSystem,":").concat(e.id)})).join(",")}},e.prototype.setSuggestionShownFields=function(e){this.typeaheadEvent.noOfSuggestions=e.sr.length,this.typeaheadEvent.serviceRequestLogId=e.rid,e.sr&&e.sr.length&&(this.typeaheadEvent.suggestionType=this.getSuggestionType(e.sr[0].category),this.typeaheadEvent.suggestionList=this.getSuggestionList(e.sr))},e.prototype.setSuggestionSelectedFields=function(e){this.typeaheadEvent.suggestionType=this.getSuggestionType(e.category),this.typeaheadEvent.searchDestination=this.getGeoEntity(e),this.typeaheadEvent.selectionDepth=parseInt(e.index,10),e&&"CATEGORIZED"!==e.displayType&&(this.typeaheadEvent.selectionDepth+=1)},e.prototype.setCurrentLocationSelectedFields=function(){this.typeaheadEvent.suggestionType=Pe.CURRENT_LOCATION,this.typeaheadEvent.typeaheadSelection=!0,this.typeaheadEvent.searchDestination={fullName:"CurrentLocation",id:"",type:Pe.CURRENT_LOCATION},this.typeaheadEvent.selectionDepth=1},e.prototype.getSearchField=function(e){return e?ze.isOrigin(e)?_e.O:ze.isDestination(e)?_e.D:_e.U:_e.U},e.prototype.getGeoEntity=function(e){return{fullName:e.regionNames.lastSearchName,id:this.getSourceId(e),shortName:e.regionNames.shortName,sourceSystem:this.getSourceSystem(e),type:e.type}},e.prototype.getSourceId=function(e){var t;return e.sourceId||(null===(t=e.essId)||void 0===t?void 0:t.sourceId)||e.hotelId||e.gaiaId||ze.UNKNOWN},e.prototype.getSourceSystem=function(e){var t,n,i;switch(i=e.hotelId?e.sourceName||(null===(t=e.essId)||void 0===t?void 0:t.sourceName)||"LCM":e.sourceName||(null===(n=e.essId)||void 0===n?void 0:n.sourceName)||e.gaiaId?"GAI":""){case"GAI":return we.GAIA;case"LCM":return we.LCM;case"GPA":return we.GOOGLE;default:return i||we.UNKNOWN}},e.prototype.getSuggestionType=function(e){switch(e){case"GOOGLEMAPS":return Pe.GOOGLE;case"USERHISTORY":return Pe.RECENT_HISTORY;case"ALTERNATE":return Pe.ALTERNATE;case"POPULAR":return Pe.POPULAR;case"CURRENTLOCATION":return Pe.CURRENT_LOCATION;default:return Pe.NORMAL}},e.prototype.getSuggestionList=function(e){var t=this;return e.map((function(e){var n={id:t.getSourceId(e),sourceSystem:t.getSourceSystem(e),type:e.type};return e.hierarchyInfo&&e.hierarchyInfo.relation&&e.hierarchyInfo.relation.length&&(n.reason=e.hierarchyInfo.relation[0]),n}))},e.prototype.getSublob=function(e,t){return(t=ze.getSubLob(e,t))?".".concat(t):""},e.prototype.getPageName=function(e,t){if(t=t.toLowerCase(),(e=e.toLowerCase())&&-1===e.indexOf("homepage")){var n=this.checkIfHomepage(t)?"Homepage":this.findPageName(e);return-1!==n.indexOf("UNKNOWN")?this.findPageName(t):n}return this.checkIfHomepage(t)?"Homepage":this.findPageName(t)},e.prototype.checkIfHomepage=function(e){return/^(https:\/\/)[a-zA-Z]{2,}\.[a-zA-Z0-9]{1,61}\.[a-zA-Z.]{2,}((\/\?)|\/$)/.test(e)},e.prototype.findPageName=function(e){return-1!==e.indexOf("package")||-1!==e.indexOf("packagetype")?this.returnPageName("Packages",e):-1!==e.indexOf("flight")?this.returnPageName("Flights",e):-1!==e.indexOf("hotel")?this.returnPageName("Hotels",e):-1!==e.indexOf("car")?this.returnPageName("Cars",e):-1!==e.indexOf("lx")||-1!==e.indexOf("activities")||-1!==e.indexOf("things-to-do")?this.returnPageName("Activities",e):-1!==e.indexOf("rail")?this.returnPageName("Rails",e):"UNKNOWN"},e.prototype.returnPageName=function(e,t){return-1!==t.indexOf("search")?"".concat(e,".Search"):"".concat(e,"LandingPage")},e.prototype.calculateTimeSpendOnTypeaheadInput=function(e){var t=e.focusTime;this.typeaheadEvent.timestamps.timeFromFocusToBlur=(new Date).getTime()-new Date(t).getTime()},e}(),He=function(){function e(e){this.value=e}return e.of=function(t){if(e.isEmpty(t))throw new Error("Optional.of doesn't accept undefined or null values. Use Optional.ofNullable instead");return new e(t)},e.ofNullable=function(t){return new e(t)},e.empty=function(){return new e(null)},e.isEmpty=function(e){return null==e||void 0===e},e.prototype.get=function(){if(this.isPresent())return this.value;throw new Error("Exception while trying to get the value of an empty Optional")},e.prototype.isPresent=function(){return!e.isEmpty(this.value)},e.prototype.isNotPresent=function(){return!this.isPresent()},e.prototype.orElse=function(e){return this.isPresent()?this.value:e},e}();!function(e){e.TYPEAHEAD_FOCUS="typeahead-focus",e.TYPEAHEAD_SELECT="typeahead-select",e.TYPEAHEAD_BLUR="typeahead-blur",e.WIZARD_SUBMIT="wizard-submit",e.RECOMMENDATION_SEEN="recommendation-seen",e.RECOMMENDATION_SELECTED="recommendation-selected"}(Fe||(Fe={}));var Be=function(){function e(t){this.analytics=t,this.isEgtaLoggingEnabled=!0,e.sessionStore||this.initSessionStore()}return e.prototype.initLogger=function(t){this.initSessionStore(),this.initializeInputField();var n=t.client,i=t.subLob,s=t.lob,o=t.locale,a=t.siteId,r=t.personalize,l=t.enableEgta;e.sessionStore.metadata={client:n,subLob:i,lob:s,locale:o,siteId:a,personalize:r,enableEgta:l}},e.prototype.logTypeaheadRequest=function(t){e.sessionStore&&(e.sessionStore.query=t)},e.prototype.logTypeaheadResponse=function(t){e.sessionStore.response=t,e.sessionStore.selected=void 0;var n=Ge.getRecommendationSeenMessage(t,e.sessionStore.fieldName||"");n&&this.trackEventToUisPrime(this.getReferrerId(Fe.RECOMMENDATION_SEEN),Fe.RECOMMENDATION_SEEN,!1,[n])},e.prototype.logTypeaheadOpen=function(t){e.sessionStore.prefill=t,this.initializeInputField(),this.isEgtaLoggingEnabled&&this.trackEventToUisPrime(this.getReferrerId(Fe.TYPEAHEAD_FOCUS),Fe.TYPEAHEAD_FOCUS,!1,[new Ke(Oe.FOCUS,e.sessionStore).getTypeaheadEventMessage()])},e.prototype.logSuggestionSelected=function(t){var n="CURRENT_LOCATION"===(null==t?void 0:t.type);He.ofNullable(t).isPresent()&&this.essResponseIsNotEmpty()&&(e.sessionStore.selected=e.sessionStore.response.sr[t.index-1]);var i=n?Oe.CURRENT_LOCATION:Oe.SELECT,s=new Ke(i,e.sessionStore),o=Ge.getRecommendationClickedMessage(e.sessionStore.selected,e.sessionStore.response,e.sessionStore.fieldName||"");if(this.isEgtaLoggingEnabled){var a=[s.getTypeaheadEventMessage()];o&&this.trackEventToUisPrime(this.getReferrerId(Fe.RECOMMENDATION_SELECTED),Fe.RECOMMENDATION_SELECTED,!1,[o]),this.trackEventToUisPrime(this.getReferrerId(),Fe.TYPEAHEAD_SELECT,!1,a)}return s.getFlattenedJsonMessage()},e.prototype.logTypeaheadBlurEvent=function(){var t,n=this.buildUisPrimeMessages();this.isEgtaLoggingEnabled&&n.push(new Ke(Oe.BLUR,e.sessionStore).getTypeaheadEventMessage()),this.trackEventToUisPrime(this.getReferrerId(),Fe.TYPEAHEAD_BLUR,!1,n),e.sessionStore.noOfBackspaces=0,null===(t=e.sessionStore.input)||void 0===t||t.removeEventListener("keydown",this.keyDown)},e.prototype.isResolveNoSuggestionSelected=function(t){e.sessionStore.isResolve=t},e.prototype.logWizardSubmitEvent=function(){this.resetLoggerState()},e.prototype.trackEventToUisPrime=function(e,t,n,i){var o,a;try{null===(o=this.analytics)||void 0===o||o.trackEvent(e,t,null===(a=this.analytics)||void 0===a?void 0:a.omnitureData,null,n,i)}catch(r){ze.logError((0,s.__assign)((0,s.__assign)({},"string"==typeof r?{e:r}:(0,s.__assign)({},r)),{message:"Failed typeahead event tracking to UIS Prime"}))}},e.prototype.buildUisPrimeMessages=function(){return ze.isOrigin(e.sessionStore.fieldName||"")?e.leg.origin=(0,s.__assign)({},e.sessionStore):e.leg.dest=(0,s.__assign)({},e.sessionStore),(0,s.__spreadArray)((0,s.__spreadArray)([],this.getTrackingDataEvents(),!0),[this.getSelectedSuggestionEvents()],!1)},e.prototype.getTrackingDataEvents=function(){var t=this.getUserTypedQuery(e.sessionStore),n=t?t.length:0,i=[];return this.isASuggestionSelected()&&i.push(Object.freeze({messageContent:{name:"TypeaheadSelectionDepth",value:this.getSelectedSuggestionPosition()},schemaName:"events"})),e.sessionStore.response&&i.push(Object.freeze({messageContent:{name:"TypeaheadSearch",value:0},schemaName:"events"})),i.push(Object.freeze({messageContent:{name:"TypeaheadCharactersTyped",value:n},schemaName:"events"})),i},e.prototype.getSelectedSuggestionEvents=function(){var t=this.getSelectedSuggestionData("origin",e.leg.origin),n=this.getSelectedSuggestionData("dest",e.leg.dest);return Object.freeze({messageContent:{selectedSuggestions:[t,n]},schemaName:"allSelectedSuggestions"})},e.prototype.getSelectedSuggestionData=function(t,n){var i=null==n?void 0:n.selected,s="origin"!==t||n?(null==n?void 0:n.query)||(null==n?void 0:n.prefill)||"TANoneSelected":"OriginNotApplicable",o=this.getUserTypedQuery(e.sessionStore),a=i&&i.regionNames&&i.regionNames.lastSearchName||s;return i?i.essId?{essRequestId:(e.sessionStore.response||{rid:"-"}).rid,lastSearchName:a,relation:i&&i.hierarchyInfo&&i.hierarchyInfo.relation&&i.hierarchyInfo.relation[0]||"-",searchField:t,sourceName:i.essId.sourceName,stringSourceId:(i&&i.essId&&i.essId.sourceId||-1).toString(),suggestionType:i?i.type:"UNKNOWN",userHistory:!!i&&"USERHISTORY"===i.category,userTypedQuery:o}:{essRequestId:(e.sessionStore.response||{rid:"-"}).rid,lastSearchName:a,relation:i&&i.hierarchyInfo&&i.hierarchyInfo.relation&&i.hierarchyInfo.relation[0]||"-",searchField:t,sourceName:i.sourceName?i.sourceName:"UNKNOWN",stringSourceId:(i&&i.essId&&i.essId.sourceId||-1).toString(),suggestionType:i?i.type:"UNKNOWN",userHistory:!!i&&"USERHISTORY"===i.category,userTypedQuery:o}:{essRequestId:(e.sessionStore.response||{rid:"-"}).rid,lastSearchName:a,relation:i&&i.hierarchyInfo&&i.hierarchyInfo.relation&&i.hierarchyInfo.relation[0]||"-",searchField:t,sourceName:"UNKNOWN",stringSourceId:(i&&i.essId&&i.essId.sourceId||-1).toString(),suggestionType:i?i.type:"UNKNOWN",userHistory:!!i&&"USERHISTORY"===i.category,userTypedQuery:o}},e.prototype.getReferrerId=function(t){if(t===Fe.RECOMMENDATION_SEEN)return"TYPEAHEAD.EGREC.RecSeen";if(t===Fe.RECOMMENDATION_SELECTED)return"TYPEAHEAD.EGREC.RecSelected";var n=e.sessionStore.metadata||{},i=[];return i.push(this.getLaunchView(n.client||"")),i.push(this.getWizard(n.client||"")),i.push(n.lob||"Unknown"),i.push(this.getShortLob(n.lob||"",n.subLob)),i.push(n.locale||"-"),i.push(n.siteId||"-"),t===Fe.TYPEAHEAD_FOCUS?i.push("TAStart"):(i.push(this.getTypeaheadTrigger()),i.push.apply(i,this.getInstrumentationValue((n.lob||"").toLowerCase()))),i.join("|")},e.prototype.getLaunchView=function(e){return(e=e.toLowerCase()).indexOf("home")>-1?"Home":e.indexOf("flight")>-1?"FLT":e.indexOf("hotels.search")>-1?"":e.indexOf("hotel")>-1?"HTL":e.indexOf("vacationrental")>-1?"VR":e.indexOf("pack")>-1?"PKG":e.indexOf("car")>-1?"CAR":e.indexOf("cru")>-1?"CRU":e.indexOf("lx")>-1?"LX":e.indexOf("rail")>-1?"RAIL":e.indexOf("open")>-1?"OPEN":e},e.prototype.getWizard=function(e){switch(e.toLowerCase()){case"hotels.search":case"flights.search":case"open.search":case"cars.search":case"lx.Search":case"packages.search":return"UpdateSearch";default:return"CoreWzd"}},e.prototype.getShortLob=function(e,t){switch(e.toLowerCase()){case"flights":return"F.".concat(ze.getSubLob(e,t));case"hotels":return"H";case"packages":return ze.getSubLob(e,t);case"activities":return"LX";case"cruises":return"CR";case"cars":return"C";default:return"-"}},e.prototype.getTypeaheadTrigger=function(){return this.essResponseIsNotEmpty()?""===e.sessionStore.response.q?this.isASuggestionSelected()?"TAShow.TAFocus":"TAShow.TANoSelection":this.isASuggestionSelected()?"TAShow.TASelection":"TAShow.TANoSelection":"TANoShow.TAPrevSearch"},e.prototype.getInstrumentationValue=function(t){var n=[],i="-";this.getSelectedSuggestionPosition()>=0&&(i=this.getSelectedSuggestionPosition().toString());var s=this.essResponseIsNotEmpty()?e.sessionStore.response.sr.length:0;return"flights"===t||"hotels"===t?n.push("".concat(this.getHierarchyType(e.sessionStore.selected),"#").concat(i)):n.push("L#".concat(i)),n.push("".concat(this.getUserTypedQuery(e.sessionStore)&&e.sessionStore.metadata&&e.sessionStore.metadata.enableEgta?"EGTA":"ESS","#").concat(s)),n.push("UH#".concat(this.getNumberOfUserHistorySuggestions())),n},e.prototype.getHierarchyType=function(e){if(He.ofNullable(e).isPresent()){if(this.isChild(e))return"CL";if(this.isParent(e))return"PL"}return"DL"},e.prototype.isChild=function(e){if(He.ofNullable(e).isNotPresent())return!1;var t=e&&e.hierarchyInfo&&e.hierarchyInfo.relation||[];return 0!==t.length&&t.indexOf("child")>=0},e.prototype.isParent=function(t){if(He.ofNullable(t).isNotPresent()||!this.essResponseIsNotEmpty())return!1;var n=parseInt(He.ofNullable(t.index).orElse("-1"),10);return!(n<0||e.sessionStore.response.sr.length<=n+1)&&this.isChild(e.sessionStore.response.sr[n+1])},e.prototype.getNumberOfUserHistorySuggestions=function(){return e.sessionStore.metadata&&e.sessionStore.metadata.personalize?this.essResponseIsNotEmpty()?e.sessionStore.response.sr.filter((function(e){return"USERHISTORY"===e.category})).length.toString():"0":"-"},e.prototype.essResponseIsNotEmpty=function(){return e.sessionStore.response&&e.sessionStore.response.sr&&e.sessionStore.response.sr.length>0},e.prototype.isASuggestionSelected=function(){return!!e.sessionStore.selected},e.prototype.getUserTypedQuery=function(e){return e.query===e.prefill?"":e.query},e.prototype.getSelectedSuggestionPosition=function(){if(!this.isASuggestionSelected()||He.ofNullable(e.sessionStore.selected.index).isNotPresent())return-1;try{return parseInt(e.sessionStore.selected.index,10)+1}catch(t){return-1}},e.prototype.resetLoggerState=function(){this.initSessionStore(),e.leg={}},e.prototype.keyDown=function(t){(t.key&&["Delete","Backspace"].indexOf(t.key)>-1||t.keyCode&&[8,46].indexOf(t.keyCode)>-1)&&(e.sessionStore.noOfBackspaces+=1)},e.prototype.initializeInputField=function(){var t,n;e.sessionStore.input=ze.getDomElement(),e.sessionStore.fieldName=ze.getInputElementId(e.sessionStore.input),null===(t=e.sessionStore.input)||void 0===t||t.removeEventListener("keydown",this.keyDown),null===(n=e.sessionStore.input)||void 0===n||n.addEventListener("keydown",this.keyDown)},e.prototype.initSessionStore=function(){e.sessionStore={metadata:{lob:ze.UNKNOWN},noOfBackspaces:0,query:"",href:window.location.href}},e.leg={},e}(),We=function(){function e(e,t,n){try{Ee.init(n),ze.init(t),this.tel=new Be(e),this.cml=new be(t)}catch(i){ze.logError(i)}}return e.prototype.initLogger=function(e){this.metadata=e},e.prototype.logTypeaheadOpen=function(e){var t,n,i,s;try{null===(t=this.tel)||void 0===t||t.initLogger(this.metadata),null===(n=this.cml)||void 0===n||n.initLogger(this.metadata),null===(i=this.tel)||void 0===i||i.logTypeaheadOpen(e),null===(s=this.cml)||void 0===s||s.logTypeaheadOpen(e)}catch(o){ze.logError(o)}},e.prototype.logTypeaheadRequest=function(e){var t,n;try{null===(t=this.tel)||void 0===t||t.logTypeaheadRequest(e),null===(n=this.cml)||void 0===n||n.logTypeaheadRequest(e)}catch(i){ze.logError(i)}},e.prototype.logTypeaheadResponse=function(e){var t;try{this.prevResponse=this.response,this.response=e,null===(t=this.cml)||void 0===t||t.logTypeaheadResponse(e)}catch(n){ze.logError(n)}},e.prototype.logSuggestionShown=function(e){var t,n,i,s;try{e===(null===(t=this.response)||void 0===t?void 0:t.q)?this.shownResponse=this.response:this.shownResponse=e===(null===(n=this.prevResponse)||void 0===n?void 0:n.q)?this.prevResponse:void 0,this.shownResponse&&(null===(i=this.tel)||void 0===i||i.logTypeaheadResponse(this.shownResponse),null===(s=this.cml)||void 0===s||s.logSuggestionShown(this.shownResponse))}catch(o){ze.logError(o)}},e.prototype.logSuggestionSelected=function(e){var t,n,i;try{if(this.shownResponse&&e){"CATEGORIZED"===e.displayType&&(e.index+=1);var s=null===(t=this.tel)||void 0===t?void 0:t.logSuggestionSelected(e);null===(n=this.cml)||void 0===n||n.logSuggestionSelected(e,s),this.resetResponse()}e||null===(i=this.tel)||void 0===i||i.isResolveNoSuggestionSelected(!0)}catch(o){ze.logError(o)}},e.prototype.logResponse=function(e){var t,n;try{e.ok||null===(t=this.cml)||void 0===t||t.logError(e.status),null===(n=this.cml)||void 0===n||n.logResponse(e)}catch(i){ze.logError(i)}},e.prototype.logTypeaheadBlurEvent=function(){var e,t;try{null===(e=this.tel)||void 0===e||e.logTypeaheadBlurEvent(),null===(t=this.cml)||void 0===t||t.logTypeaheadClientMetrics(),this.resetResponse()}catch(n){ze.logError(n)}},e.prototype.logWizardSubmitEvent=function(){var e;try{null===(e=this.tel)||void 0===e||e.logWizardSubmitEvent()}catch(t){ze.logError(t)}},e.prototype.resetResponse=function(){this.prevResponse=this.response,this.response=this.shownResponse,this.shownResponse=void 0},e}()}}]);
//# sourceMappingURL=node_modules~uitk-react-typeahead.15643d06ea4e963c25f8.js.map