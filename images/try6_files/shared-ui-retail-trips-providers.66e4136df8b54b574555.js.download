/*@license For license information please refer to shared-ui-retail-trips-providers.licenses.txt*/
(self.webpackChunkblossom_flex_ui=self.webpackChunkblossom_flex_ui||[]).push([[76190],{40851:function(t,n,e){e.d(n,{Fu:function(){return j},Yi:function(){return M},_$:function(){return F}});var r=e(67294),i=e(69430),o=e(17684);e(98250);function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function u(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function s(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){u(t,n,e[n])}))}return t}function c(t,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t}function p(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,o=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){u=!0,i=s}finally{try{a||null==e.return||e.return()}finally{if(u)throw i}}return o}}(t,n)||I(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function l(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||I(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,n){if(t){if("string"==typeof t)return a(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}function d(){var t=m(["\n  mutation SharedUIWeb_ConnectExternalMailboxMutation($context: ContextInput!, $mailboxType: String!, $redirectUri: String!) {\n    connectExternalMailbox(context: $context, mailboxType: $mailboxType, redirectUri: $redirectUri) {\n      redirectUri {\n        value\n      }\n    }\n  }\n"]);return d=function(){return t},t}function f(){var t=m(["\n  fragment TripsUIToastFragment on TripsUIToast {\n    analytics {\n      linkName\n      referrerId\n    }\n    text\n    actionText\n    action {\n      ...TripsUIToastActionFragment\n    }\n  }\n\n  fragment TripsUIToastActionFragment on TripsUIToastAction {\n    ...TripsUIToastUILinkActionFragment\n    ...TripsUIIOpenInviteToTripSheetActionFragement\n  }\n\n  fragment TripsUIIOpenInviteToTripSheetActionFragement on TripsUIIOpenInviteToTripSheetAction {\n    analytics {\n      linkName\n      referrerId\n    }\n    primer {\n      tripId\n    }\n  }\n\n  fragment TripsUIToastUILinkActionFragment on UILinkAction {\n    accessibility\n    analytics {\n      linkName\n      referrerId\n    }\n    resource {\n      value\n    }\n  }\n"]);return f=function(){return t},t}function T(){var t=m(["\n  mutation SharedUIWeb_SaveExternalItemsToTripMutation(\n    $context: ContextInput!\n    $tripId: String!\n    $itemIdsToAdd: [String!]!\n    $itemIdsToRemove: [String!]!\n  ) {\n    saveExternalItemsToTrip(context: $context, tripId: $tripId, itemIdsToAdd: $itemIdsToAdd, itemIdsToRemove: $itemIdsToRemove) {\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return T=function(){return t},t}function v(){var t=m(["\n  mutation SharedUIWeb_CreateTripMutation(\n    $context: ContextInput!\n    $name: String!\n    $description: String\n    $itemId: String\n    $operationType: String\n    $tripContext: TripsUITripContextInput\n  ) {\n    createTrip(context: $context, name: $name, description: $description, itemId: $itemId, operationType: $operationType, tripContext: $tripContext) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return v=function(){return t},t}function y(){var t=m(["\n  mutation SharedUIWeb_DeleteTripMutation($context: ContextInput!, $tripId: String!) {\n    deleteTrip(context: $context, tripId: $tripId) {\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return y=function(){return t},t}function g(){var t=m(["\n  mutation SharedUIWeb_EditTripMutation($context: ContextInput!, $description: String, $name: String, $tripId: String!) {\n    editTrip(context: $context, description: $description, name: $name, tripId: $tripId) {\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return g=function(){return t},t}function x(){var t=m(["\n  mutation SharedUIWeb_UpdateTripItemTripMutation(\n    $context: ContextInput!\n    $tripContext: TripsUITripContextInput!\n    $itemId: String!\n    $operationType: String!\n  ) {\n    updateTripItemTrip(context: $context, tripContext: $tripContext, itemId: $itemId, operationType: $operationType) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return x=function(){return t},t}function $(){var t=m(["\n  mutation SharedUIWeb_SendTripInviteMutation($tripId: String!, $recipients: String!, $message: String!, $context: ContextInput!) {\n    sendTripInvite(tripId: $tripId, recipients: $recipients, message: $message, context: $context) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n  ","\n"]);return $=function(){return t},t}function b(){var t=m(["\n  mutation SharedUIWeb_CreateTripItineraryTemplateMutation($tripId: String!, $context: ContextInput!) {\n    createTripItineraryTemplate(tripId: $tripId, context: $context) {\n      status\n    }\n  }\n"]);return b=function(){return t},t}function S(){var t=m(["\n  mutation SharedUIWeb_RemoveTripItemMutation($context: ContextInput!, $itemId: String!, $tripId: String!) {\n    removeTripItem(context: $context, itemId: $itemId, tripId: $tripId) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return S=function(){return t},t}function P(){var t=m(["\n  mutation SharedUIWeb_SaveTripItemsMutation($context: ContextInput!, $tripId: String, $criteria: TripsUISaveTripItemsCriteriaInput!) {\n    saveTripItems(context: $context, tripId: $tripId, criteria: $criteria) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n      url {\n        value\n      }\n    }\n  }\n\n  ","\n"]);return P=function(){return t},t}function O(){var t=m(["\n  mutation SharedUIWeb_UpdateTripItemDatesMutation($context: ContextInput!, $itemIds: [String!], $tripId: String!, $dateRange: DateRangeInput!) {\n    updateTripItemDates(context: $context, itemIds: $itemIds, tripId: $tripId, dateRange: $dateRange) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return O=function(){return t},t}function U(){var t=m(["\n  mutation SharedUIWeb_UpdateTripItemVoteMutation($context: ContextInput!, $tripId: String!, $itemId: String!) {\n    updateTripItemVote(context: $context, tripId: $tripId, itemId: $itemId) {\n      ... on TripsUIUpdateTripItemVoteFailureResponse {\n        toast {\n          ...TripsUIToastFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return U=function(){return t},t}function C(){var t=m(["\n  mutation SharedUIWeb_SaveTripItemCommentMutation(\n    $context: ContextInput!\n    $tripId: String!\n    $itemId: String!\n    $comment: String!\n    $commentId: String\n  ) {\n    saveTripItemComment(context: $context, tripId: $tripId, itemId: $itemId, comment: $comment, commentId: $commentId) {\n      ... on TripsUISaveTripItemCommentFailureResponse {\n        toast {\n          ...TripsUIToastFragment\n        }\n      }\n      ... on TripsUISaveTripItemCommentSuccessResponse {\n        actionCount {\n          count\n          accessibility\n        }\n        comments {\n          avatar {\n            ... on TripsUITextAvatar {\n              text\n            }\n          }\n          comment\n          id\n          name\n          timestamp\n        }\n        impressionAnalytics {\n          linkName\n          referrerId\n        }\n      }\n    }\n  }\n\n  ","\n"]);return C=function(){return t},t}function _(t){return t.reduce((function(t,n){return Object.assign(t,u({},n,{status:"UNKNOWN"}))}),{})}function h(t){return function(){return Promise.resolve({success:!1,failureReason:"No ExternalItemsOperationsProvider found in tree found while calling ".concat(t),failure:{type:"NO_PROVIDER"}})}}var E={connectExternalMailbox:h("connectExternalMailbox"),saveExternalItemsToTrip:h("saveExternalItemsToTrip")};r.createContext(c(s({},E),{state:_(Object.keys(E))}));function N(t){return function(n,e,r){return e((function(n){return c(s({},n),u({},t.operationName,{status:"IN_PROGRESS"}))})),n({variables:r}).then((function(n){if(n.errors){var r={failureReason:"".concat(t.operationName," failed with graphql error(s)"),failure:{type:"GRAPHQL",errors:n.errors}};return e((function(n){return c(s({},n),u({},t.operationName,{status:"FAILURE",error:r}))})),s({success:!1},r)}return n.data?(e((function(e){return c(s({},e),u({},t.operationName,{status:"SUCCESS",result:n}))})),s({success:!0},n)):Promise.reject(new Error("".concat(t.operationName," returned null data")))})).catch((function(n){var r,i,o="unexpected error encountered while calling ".concat(t.operationName),a="".concat(o,": ").concat((r=n,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)?n.message:n)),p={failureReason:o,failure:{type:"UNKNOWN",error:new Error(a)}};return e((function(n){return c(s({},n),u({},t.operationName,{status:"FAILURE",error:p}))})),s({success:!1},p)}))}}N({operationName:"connectExternalMailbox"}),(0,i.Ps)(d());var A=(0,i.Ps)(f());(0,i.Ps)(T(),A),N({operationName:"saveExternalItemsToTrip"});var w=r.createContext(void 0),j=function(t){var n=t.children,e=p(r.useState([]),2),i=e[0],o=e[1],a=r.useMemo((function(){return[]}),[]),u=r.useCallback((function(t){return t?(a.find((function(n){return Object.is(n,t)}))||a.push(t),t.reference?{subscribe:null!==(n=i.find((function(n){return n.result.reference===t.reference})))&&void 0!==n?n:null}:{subscribe:null!==(e=i.find((function(n){return n.result.type===t.type})))&&void 0!==e?e:null}):{subscribe:null};var n,e}),[a,i]),s=r.useCallback((function(t,n){var e=u(t).subscribe;e&&t&&(t.reference&&e.result.reference&&t.reference===e.result.reference&&n(e),t.reference||t.type!==e.result.type||n(e))}),[u]),c=r.useCallback((function(t){var n=a.map((function(t){return t.type})),e=t.filter((function(t){return n.includes(t.signal.type)})).map((function(t){var n;return{result:{type:t.signal.type,reference:null!==(n=t.signal.reference)&&void 0!==n?n:void 0,values:t.values}}}));o(e)}),[a]),m=r.useMemo((function(){return{onSignalEmit:s,emitSignals:c}}),[s,c]);return r.createElement(w.Provider,{value:m},n)};var F=function(t){var n=function(){var t=r.useContext(w);if(void 0===t)throw new Error("No Trips SignalProvider found in React tree");return t}().emitSignals,e=p((0,o.gw)(),1)[0];return{emit:function(){var r=null==t?void 0:t.map((function(t){var n=t.values.map((function(t){switch(t.value.__typename){case"TripsSignalFieldIdValue":var n=t.value,r=e.validatedInputs.inputFields.find((function(t){return t.inputId===n.id}));return{__typename:t.__typename,key:t.key,value:r.inputValue};case"TripsSignalFieldIdExistingValues":var i,o=t.value,a=o.ids.map((function(t){return e.validatedInputs.inputFields.find((function(n){return n.inputId===t}))})).map((function(t){return t.inputValue})),u=l(null!==(i=o.prefixes)&&void 0!==i?i:[]).concat(l(a));return{__typename:t.__typename,key:t.key,value:u};default:return{__typename:t.__typename,key:t.key,value:null}}}));return{__typename:t.__typename,signal:t.signal,values:n}}));r&&n(r)}}};function R(t){return function(){return Promise.resolve({success:!1,failureReason:"No TripOperationsProvider found in tree found while calling ".concat(t),failure:{type:"NO_PROVIDER"}})}}var k={createTripItineraryTemplate:R("createTripItineraryTemplate"),createTrip:R("createTrip"),deleteTrip:R("deleteTrip"),editTrip:R("editTrip"),updateTripItemTrip:R("updateTripItemTrip"),sendTripInvite:R("sendTripInvite")},M=(r.createContext(c(s({},k),{state:_(Object.keys(k))})),N({operationName:"createTrip"}),function(t){return t.APP_PHONE="APP_PHONE",t.APP_TABLET="APP_TABLET",t.CHAT_APP="CHAT_APP",t.DESKTOP="DESKTOP",t.MOBILE_PHONE="MOBILE_PHONE",t.MOBILE_TABLET="MOBILE_TABLET",t.VOICE_APP="VOICE_APP",t}(M||{}));(0,i.Ps)(v(),A),N({operationName:"deleteTrip"}),(0,i.Ps)(y(),A),N({operationName:"editTrip"}),(0,i.Ps)(g(),A),(0,i.Ps)(x(),A),N({operationName:"updateTripItemTrip"}),N({operationName:"sendTripInvite"}),(0,i.Ps)($(),A),N({operationName:"createTripItineraryTemplate"}),(0,i.Ps)(b());function D(t){return function(){return Promise.resolve({success:!1,failureReason:"No TripItemOperationsProvider found in tree found while calling ".concat(t),failure:{type:"NO_PROVIDER"}})}}var V={removeTripItem:D("removeTripItem"),saveTripItems:D("saveTripItems"),updateTripItemDates:D("updateTripItemDates"),updateTripItemVote:D("updateTripItemVote"),saveTripItemComment:D("saveTripItemComment")};r.createContext(c(s({},V),{state:_(Object.keys(V))})),N({operationName:"removeTripItem"}),(0,i.Ps)(S(),A),N({operationName:"saveTripItems"}),(0,i.Ps)(P(),A),(0,i.Ps)(O(),A),N({operationName:"updateTripItemDates"}),(0,i.Ps)(U(),A),N({operationName:"updateTripItemVote"}),(0,i.Ps)(C(),A),N({operationName:"saveTripItemComment"});r.createContext(void 0);r.createContext({setTripsToastData:function(){},setTripsFallbackToastData:function(){}})}}]);
//# sourceMappingURL=shared-ui-retail-trips-providers.66e4136df8b54b574555.js.map